<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>mir_eval documentation &mdash; mir_eval 0.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="mir_eval 0.0 documentation" href="#" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="#">mir_eval 0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="mir-eval-documentation">
<h1>mir_eval documentation<a class="headerlink" href="#mir-eval-documentation" title="Permalink to this headline">¶</a></h1>
<p>Contents:</p>
<div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
</div>
<div class="section" id="mir-eval">
<h1>mir_eval<a class="headerlink" href="#mir-eval" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-mir_eval.beat">
<span id="mir-eval-beat"></span><h2>mir_eval.beat<a class="headerlink" href="#module-mir_eval.beat" title="Permalink to this headline">¶</a></h2>
<p>A variety of evaluation techniques for determining a beat tracker&#8217;s accuracy</p>
<dl class="docutils">
<dt>Based on the methods described in:</dt>
<dd>Matthew E. P. Davies,  Norberto Degara, and Mark D. Plumbley.
&#8220;Evaluation Methods for Musical Audio Beat Tracking Algorithms&#8221;,
Queen Mary University of London Technical Report C4DM-TR-09-06
London, United Kingdom, 8 October 2009.</dd>
<dt>See also the Beat Evaluation Toolbox:</dt>
<dd><a class="reference external" href="https://code.soundsoftware.ac.uk/projects/beat-evaluation/">https://code.soundsoftware.ac.uk/projects/beat-evaluation/</a></dd>
</dl>
<dl class="function">
<dt id="mir_eval.beat.trim_beats">
<tt class="descclassname">mir_eval.beat.</tt><tt class="descname">trim_beats</tt><big>(</big><em>beats</em>, <em>min_beat_time=5.0</em><big>)</big><a class="headerlink" href="#mir_eval.beat.trim_beats" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes beats before min_beat_time.  A common preprocessing step.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>beats <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">Array of beat times in seconds.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>min_beat_time <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Minimum beat time to allow, default 5</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>beats_trimmed <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">Trimmed beat array.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.beat.validate">
<tt class="descclassname">mir_eval.beat.</tt><tt class="descname">validate</tt><big>(</big><em>metric</em><big>)</big><a class="headerlink" href="#mir_eval.beat.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator which checks that the input annotations to a metric
look like valid beat time arrays, and throws helpful errors if not.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>metric <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">Evaluation metric function.  First two arguments must be
reference_beats and estimated_beats.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>metric_validated <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">The function with the beat times validated</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.beat.f_measure">
<tt class="descclassname">mir_eval.beat.</tt><tt class="descname">f_measure</tt><big>(</big><em>reference_beats</em>, <em>estimated_beats</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.beat.f_measure" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the F-measure of correct vs incorrectly predicted beats.
&#8220;Corectness&#8221; is determined over a small window.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">reference_beats</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">trim_beats</span><span class="p">(</span><span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_events</span><span class="p">(</span><span class="s">&#39;reference.txt&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">estimated_beats</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">trim_beats</span><span class="p">(</span><span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_events</span><span class="p">(</span><span class="s">&#39;estimated.txt&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f_measure</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">f_measure</span><span class="p">(</span><span class="n">reference_beats</span><span class="p">,</span> <span class="n">estimated_beats</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_beats <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">reference beat times, in seconds</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_beats <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">estimated beat times, in seconds</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>f_measure_threshold <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Window size, in seconds, default 0.07</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>f_score <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The computed F-measure score</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.beat.cemgil">
<tt class="descclassname">mir_eval.beat.</tt><tt class="descname">cemgil</tt><big>(</big><em>reference_beats</em>, <em>estimated_beats</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.beat.cemgil" title="Permalink to this definition">¶</a></dt>
<dd><p>Cemgil&#8217;s score, computes a gaussian error of each estimated beat.
Compares against the original beat times and all metrical variations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">reference_beats</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">trim_beats</span><span class="p">(</span><span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_events</span><span class="p">(</span><span class="s">&#39;reference.txt&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">estimated_beats</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">trim_beats</span><span class="p">(</span><span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_events</span><span class="p">(</span><span class="s">&#39;estimated.txt&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cemgil_score</span><span class="p">,</span> <span class="n">cemgil_max</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">cemgil</span><span class="p">(</span><span class="n">reference_beats</span><span class="p">,</span> <span class="n">estimated_beats</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_beats <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">reference beat times, in seconds</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_beats <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">query beat times, in seconds</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>cemgil_sigma <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Sigma parameter of gaussian error windows, default 0.04</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>cemgil_score <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Cemgil&#8217;s score for the original reference beats</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>cemgil_max <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The best Cemgil score for all metrical variations</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.beat.goto">
<tt class="descclassname">mir_eval.beat.</tt><tt class="descname">goto</tt><big>(</big><em>reference_beats</em>, <em>estimated_beats</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.beat.goto" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate Goto&#8217;s score, a binary 1 or 0 depending on some specific
heuristic criteria</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">reference_beats</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">trim_beats</span><span class="p">(</span><span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_events</span><span class="p">(</span><span class="s">&#39;reference.txt&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">estimated_beats</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">trim_beats</span><span class="p">(</span><span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_events</span><span class="p">(</span><span class="s">&#39;estimated.txt&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">goto_score</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">reference_beats</span><span class="p">,</span> <span class="n">estimated_beats</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_beats <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">reference beat times, in seconds</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_beats <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">query beat times, in seconds</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>goto_threshold <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Threshold of beat error for a beat to be &#8220;correct&#8221;, default 0.35</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>goto_mu <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The mean of the beat errors in the continuously correct
track must be less than this, default 0.2</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>goto_sigma <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The std of the beat errors in the continuously
correct track must be less than this, default 0.2</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>goto_score <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Either 1.0 or 0.0 if some specific criteria are met</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.beat.p_score">
<tt class="descclassname">mir_eval.beat.</tt><tt class="descname">p_score</tt><big>(</big><em>reference_beats</em>, <em>estimated_beats</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.beat.p_score" title="Permalink to this definition">¶</a></dt>
<dd><p>Get McKinney&#8217;s P-score.
Based on the autocorrelation of the reference and estimated beats</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">reference_beats</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">trim_beats</span><span class="p">(</span><span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_events</span><span class="p">(</span><span class="s">&#39;reference.txt&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">estimated_beats</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">trim_beats</span><span class="p">(</span><span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_events</span><span class="p">(</span><span class="s">&#39;estimated.txt&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p_score</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">p_score</span><span class="p">(</span><span class="n">reference_beats</span><span class="p">,</span> <span class="n">estimated_beats</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_beats <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">reference beat times, in seconds</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_beats <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">query beat times, in seconds</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>p_score_threshold <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Window size will be p_score_threshold*median(inter_annotation_intervals), default 0.2</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>correlation <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">McKinney&#8217;s P-score</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.beat.continuity">
<tt class="descclassname">mir_eval.beat.</tt><tt class="descname">continuity</tt><big>(</big><em>reference_beats</em>, <em>estimated_beats</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.beat.continuity" title="Permalink to this definition">¶</a></dt>
<dd><p>Get metrics based on how much of the estimated beat sequence is
continually correct.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">reference_beats</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">trim_beats</span><span class="p">(</span><span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_events</span><span class="p">(</span><span class="s">&#39;reference.txt&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">estimated_beats</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">trim_beats</span><span class="p">(</span><span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_events</span><span class="p">(</span><span class="s">&#39;estimated.txt&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CMLc</span><span class="p">,</span> <span class="n">CMLt</span><span class="p">,</span> <span class="n">AMLc</span><span class="p">,</span> <span class="n">AMLt</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">continuity</span><span class="p">(</span><span class="n">reference_beats</span><span class="p">,</span> <span class="n">estimated_beats</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_beats <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">reference beat times, in seconds</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_beats <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">query beat times, in seconds</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>continuity_phase_threshold <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Allowable ratio of how far is the estimated beat
can be from the reference beat, default 0.175</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>continuity_period_threshold <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Allowable distance between the inter-beat-interval
and the inter-annotation-interval, default 0.175</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>CMLc <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Correct metric level, continuous accuracy</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>CMLt <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Correct metric level, total accuracy (continuity not required)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>AMLc <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Any metric level, continuous accuracy</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>AMLt <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Any metric level, total accuracy (continuity not required)</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.beat.information_gain">
<tt class="descclassname">mir_eval.beat.</tt><tt class="descname">information_gain</tt><big>(</big><em>reference_beats</em>, <em>estimated_beats</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.beat.information_gain" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the information gain - K-L divergence of the beat error histogram
to a uniform histogram</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">reference_beats</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">trim_beats</span><span class="p">(</span><span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_events</span><span class="p">(</span><span class="s">&#39;reference.txt&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">estimated_beats</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">trim_beats</span><span class="p">(</span><span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_events</span><span class="p">(</span><span class="s">&#39;estimated.txt&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">information_gain</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">information_gain</span><span class="p">(</span><span class="n">reference_beats</span><span class="p">,</span> <span class="n">estimated_beats</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_beats <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">reference beat times, in seconds</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_beats <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">query beat times, in seconds</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>bins <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of bins in the beat error histogram, default 41</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>information_gain_score <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Entropy of beat error histogram</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-mir_eval.boundary">
<span id="mir-eval-boundary"></span><h2>mir_eval.boundary<a class="headerlink" href="#module-mir_eval.boundary" title="Permalink to this headline">¶</a></h2>
<p>Structural segmentation evaluation, following the protocols of MIREX2012.</p>
<ul>
<li><dl class="first docutils">
<dt>Boundary detection</dt>
<dd><ul class="first last simple">
<li>(precision, recall, f-measure)</li>
<li>median distance to nearest boundary</li>
</ul>
</dd>
</dl>
</li>
</ul>
<dl class="function">
<dt id="mir_eval.boundary.validate">
<tt class="descclassname">mir_eval.boundary.</tt><tt class="descname">validate</tt><big>(</big><em>metric</em><big>)</big><a class="headerlink" href="#mir_eval.boundary.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator which checks that the input annotations to a metric
look like valid segment times, and throws helpful errors if not.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>metric <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">Evaluation metric function.  First two arguments must be
reference_intervals and estimated_intervals.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>metric_validated <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">The function with the segment intervals are validated</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.boundary.detection">
<tt class="descclassname">mir_eval.boundary.</tt><tt class="descname">detection</tt><big>(</big><em>reference_intervals</em>, <em>estimated_intervals</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.boundary.detection" title="Permalink to this definition">¶</a></dt>
<dd><p>Boundary detection hit-rate.</p>
<p>A hit is counted whenever an reference boundary is within <tt class="docutils literal"><span class="pre">window</span></tt> of a estimated
boundary.  Note that each boundary is matched at most once: this is achieved by computing
the size of a maximal matching between reference and estimated boundary points, subject
to the window constraint.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;reference.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;estimate.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># With 0.5s windowing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">P05</span><span class="p">,</span> <span class="n">R05</span><span class="p">,</span> <span class="n">F05</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">boundary</span><span class="o">.</span><span class="n">detection</span><span class="p">(</span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">est_intervals</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># With 3s windowing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">P3</span><span class="p">,</span> <span class="n">R3</span><span class="p">,</span> <span class="n">F3</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">boundary</span><span class="o">.</span><span class="n">detection</span><span class="p">(</span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">est_intervals</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Ignoring hits for the beginning and end of track</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">P</span><span class="p">,</span> <span class="n">R</span><span class="p">,</span> <span class="n">F</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">boundary</span><span class="o">.</span><span class="n">detection</span><span class="p">(</span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">est_intervals</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">trim</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n, 2)</span></dt>
<dd><p class="first last">reference segment intervals, as returned by <cite>mir_eval.io.load_intervals</cite></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(m, 2)</span></dt>
<dd><p class="first last">estimated segment intervals, as returned by <cite>mir_eval.io.load_intervals</cite></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>window <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">size of the window of &#8216;correctness&#8217; around ground-truth beats (in seconds)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>beta <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">weighting constant for F-measure.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>trim <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><p class="first last">if <tt class="docutils literal"><span class="pre">True</span></tt>, the first and last boundary times are ignored.
Typically, these denote start (0) and end-markers.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>precision <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">precision of estimated predictions</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>recall <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">recall of reference reference boundaries</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>f_measure <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">F-measure (weighted harmonic mean of <tt class="docutils literal"><span class="pre">precision</span></tt> and <tt class="docutils literal"><span class="pre">recall</span></tt>)</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.boundary.deviation">
<tt class="descclassname">mir_eval.boundary.</tt><tt class="descname">deviation</tt><big>(</big><em>reference_intervals</em>, <em>estimated_intervals</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.boundary.deviation" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the median deviations between reference and estimated boundary times.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;reference.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;estimate.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r_to_e</span><span class="p">,</span> <span class="n">e_to_r</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">boundary</span><span class="o">.</span><span class="n">deviation</span><span class="p">(</span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">est_intervals</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n, 2)</span></dt>
<dd><p class="first last">reference segment intervals, as returned by <cite>mir_eval.io.load_intervals</cite></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(m, 2)</span></dt>
<dd><p class="first last">estimated segment intervals, as returned by <cite>mir_eval.io.load_intervals</cite></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>trim <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><p class="first last">if <tt class="docutils literal"><span class="pre">True</span></tt>, the first and last intervals are ignored.
Typically, these denote start (0.0) and end-of-track markers.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>reference_to_estimated <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">median time from each reference boundary to the closest estimated boundary</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_to_reference <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">median time from each estimated boundary to the closest reference boundary</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-mir_eval.chord">
<span id="mir-eval-chord"></span><h2>mir_eval.chord<a class="headerlink" href="#module-mir_eval.chord" title="Permalink to this headline">¶</a></h2>
<p>Functions and other supporting code for wrangling and comparing chords for
evaluation purposes.</p>
<div class="section" id="conventions">
<h3>Conventions:<a class="headerlink" href="#conventions" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Pitch class counting starts at C, e.g. C: 0, D:2, E:4, F:5, etc.</li>
</ul>
</div>
<div class="section" id="defintions">
<h3>Defintions:<a class="headerlink" href="#defintions" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">chord label: String representation of a chord name, e.g. &#8220;G:maj(4)/5&#8221;</p>
</li>
<li><dl class="first docutils">
<dt>scale degree: String representation of a diatonic interval, relative to the</dt>
<dd><p class="first last">root note, e.g. &#8216;b6&#8217;, &#8216;#5&#8217;, or &#8216;7&#8217;</p>
</dd>
</dl>
</li>
<li><p class="first">bass interval: String representation of the bass note&#8217;s scale degree.</p>
</li>
<li><dl class="first docutils">
<dt>bitmap: Positional binary vector indicating active pitch classes; may be</dt>
<dd><p class="first last">absolute or relative depending on context in the code.</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="a-note-on-comparison-functions">
<h3>A Note on Comparison Functions:<a class="headerlink" href="#a-note-on-comparison-functions" title="Permalink to this headline">¶</a></h3>
<p>There are, for better or worse, a variety of ways that chords can be compared
in a musically justifiable manner. While some rules may have tradition, and
therefore inertia in their favor, there is no single &#8216;right&#8217; way to compare
two sequences of chord labels. Embracing this reality, several comparison
rules are provided in the hope that this may allow for more nuanced insight
into the performance and, ultimately, the behaviour of a computational system.</p>
<ul>
<li><dl class="first docutils">
<dt>&#8216;mirex&#8217;*</dt>
<dd><p class="first last">A estimated chord is considered correct if it shares <em>at least</em> three pitch
classes in common.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>&#8216;mirex-augdim&#8217;*</dt>
<dd><p class="first last">Same as above, with the difference being an estimation only needs 2 pitch
classes in common with the reference to be considered &#8216;correct&#8217; for
augmented or diminished chords, instead of the normal 3 pitches.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>&#8216;near-exact&#8217;*</dt>
<dd><p class="first last">Chords are correct only if they are nearly identical to the level of
extensions, e.g. score(&#8216;F#:maj(6)/5&#8217;, &#8216;F#:maj/5&#8217;) = 1.0; this includes
enharmonic spellings, e.g. score(&#8216;F#:maj&#8217;, &#8216;Gb:maj&#8217;) = 0.0.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>&#8216;pitch_class&#8217;*</dt>
<dd><p class="first last">Chords are compared at the level of pitch classes. This means that
enharmonics and inversions are considered equal, e.g. score(&#8216;F#:maj&#8217;,
&#8216;Gb:maj&#8217;) = 1.0 and score(&#8216;C:maj6&#8217;=[C,E,G,A], &#8216;A:min7&#8217;=[A,C,E,G]) = 1.0.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>&#8216;thirds&#8217;</dt>
<dd><p class="first last">Chords are compared at the level of major or minor thirds (root and third),
For example, both score(&#8216;A:7&#8217;, &#8216;A:maj&#8217;) and score(&#8216;A:min&#8217;, &#8216;A:dim&#8217;) equal
1.0, as the third is major and minor in quality, respectively.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>&#8216;thirds-inv&#8217;</dt>
<dd><p class="first last">Same as above, but sensitive to inversions.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>&#8216;triads&#8217;</dt>
<dd><p class="first last">Chords are considered at the level of triads (major, minor, augmented,
diminished, suspended), meaning that, in addition to the root, the quality
is only considered through #5th scale degree (for augmented chords). For
example, score(&#8216;A:7&#8217;, &#8216;A:maj&#8217;) = 1.0, while score(&#8216;A:min&#8217;, &#8216;A:dim&#8217;) and
score(&#8216;A:aug&#8217;, &#8216;A:maj&#8217;) = 0.0.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>&#8216;triads-inv&#8217;</dt>
<dd><p class="first last">Same as above, but sensitive to inversions.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>&#8216;tetrads&#8217;</dt>
<dd><p class="first last">Chords are considered at the level of the entire quality in closed voicing,
i.e. spanning only a single octave; extended chords (9&#8217;s, 11&#8217;s and 13&#8217;s)
are rolled into a single octave with any upper voices included as
extensions. For example, score(&#8216;A:7&#8217;, &#8216;A:9&#8217;) = 1.0 and score(&#8216;A:7&#8217;,
&#8216;A:maj7&#8217;) = 0.0.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>&#8216;tetrads-inv&#8217;</dt>
<dd><p class="first last">Same as above, but sensitive to inversions.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>&#8216;pitch_class-recall&#8217;*</dt>
<dd><p class="first last">Recall on pitch classes in ref/est, based on the best-guess spelling of the
chord given all information at hand, including extensions. For example,
both score(&#8220;A:min(*5)&#8221;=[A, C], &#8220;C:maj6(*3)&#8221;=[C, G, A]) and
score(&#8220;C:maj(*3, *5)&#8221;=[C], &#8220;C:min(*b3, *5)&#8221;=[C]) = 1.0.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>&#8216;pitch_class-precision&#8217;*</dt>
<dd><p class="first last">Precision on pitch classes in ref/est, using the same rules described in
pitch class recall.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>&#8216;pitch_class-f&#8217;*</dt>
<dd><p class="first last">The harmonic mean (f-measure) is computed with the above recall and
precision measures.</p>
</dd>
</dl>
</li>
</ul>
<dl class="exception">
<dt id="mir_eval.chord.InvalidChordException">
<em class="property">exception </em><tt class="descclassname">mir_eval.chord.</tt><tt class="descname">InvalidChordException</tt><big>(</big><em>message=''</em>, <em>chord_label=None</em><big>)</big><a class="headerlink" href="#mir_eval.chord.InvalidChordException" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <tt class="xref py py-class docutils literal"><span class="pre">exceptions.BaseException</span></tt></p>
<p>Exception class for suspect / invalid chord labels.</p>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.pitch_class_to_semitone">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">pitch_class_to_semitone</tt><big>(</big><em>pitch_class</em><big>)</big><a class="headerlink" href="#mir_eval.chord.pitch_class_to_semitone" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a pitch class to semitone.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>pitch_class <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Spelling of a given pitch class, e.g. &#8216;C#&#8217;, &#8216;Gbb&#8217;</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><ul>
<li><dl class="first docutils">
<dt>semitone <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Semitone value of the pitch class.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li>InvalidChordException</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.scale_degree_to_semitone">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">scale_degree_to_semitone</tt><big>(</big><em>scale_degree</em><big>)</big><a class="headerlink" href="#mir_eval.chord.scale_degree_to_semitone" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a scale degree to semitone.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>scale degree <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Spelling of a relative scale degree, e.g. &#8216;b3&#8217;, &#8216;7&#8217;, &#8216;#5&#8217;</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><ul>
<li><dl class="first docutils">
<dt>semitone <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Relative semitone of the scale degree, wrapped to a single octave</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li>InvalidChordException</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.scale_degree_to_bitmap">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">scale_degree_to_bitmap</tt><big>(</big><em>scale_degree</em><big>)</big><a class="headerlink" href="#mir_eval.chord.scale_degree_to_bitmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a bitmap representation of a scale degree.</p>
<p>Note that values in the bitmap may be negative, indicating that the
semitone is to be removed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>scale_degree <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Spelling of a relative scale degree, e.g. &#8216;b3&#8217;, &#8216;7&#8217;, &#8216;#5&#8217;</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>bitmap <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, in [-1, 0, 1]</span></dt>
<dd><p class="first last">Bitmap representation of this scale degree (12-dim).</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.quality_to_bitmap">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">quality_to_bitmap</tt><big>(</big><em>quality</em><big>)</big><a class="headerlink" href="#mir_eval.chord.quality_to_bitmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the bitmap for a given quality.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>quality <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Chord quality name.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><ul>
<li><dl class="first docutils">
<dt>bitmap <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, in [0, 1]</span></dt>
<dd><p class="first last">Bitmap representation of this quality (12-dim).</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li>InvalidChordException</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.reduce_extended_quality">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">reduce_extended_quality</tt><big>(</big><em>quality</em><big>)</big><a class="headerlink" href="#mir_eval.chord.reduce_extended_quality" title="Permalink to this definition">¶</a></dt>
<dd><p>Map an extended chord quality to a simpler one, moving upper voices to
a set of scale degree extensions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>quality <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Extended chord quality to reduce.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>base_quality <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">New chord quality.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>extensions <span class="classifier-delimiter">:</span> <span class="classifier">set</span></dt>
<dd><p class="first last">Scale degrees extensions for the quality.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.validate_chord_label">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">validate_chord_label</tt><big>(</big><em>chord_label</em><big>)</big><a class="headerlink" href="#mir_eval.chord.validate_chord_label" title="Permalink to this definition">¶</a></dt>
<dd><p>Test for well-formedness of a chord label.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>chord <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Chord label to validate.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li>InvalidFormatException</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.split">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">split</tt><big>(</big><em>chord_label</em>, <em>reduce_extended_chords=False</em><big>)</big><a class="headerlink" href="#mir_eval.chord.split" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Parse a chord label into its four constituent parts:</dt>
<dd><ul class="first last simple">
<li>root</li>
<li>quality shorthand</li>
<li>scale degrees</li>
<li>bass</li>
</ul>
</dd>
<dt>Note: Chords lacking quality AND interval information are major.</dt>
<dd><ul class="first last simple">
<li>If a quality is specified, it is returned.</li>
<li>If an interval is specified WITHOUT a quality, the quality field is
empty.</li>
</ul>
</dd>
</dl>
<p>Some examples:</p>
<div class="highlight-python"><div class="highlight"><pre>&#39;C&#39; -&gt; [&#39;C&#39;, &#39;maj&#39;, {}, &#39;1&#39;]
&#39;G#:min(\*b3,\*5)/5&#39; -&gt; [&#39;G#&#39;, &#39;min&#39;, {&#39;\*b3&#39;, &#39;\*5&#39;}, &#39;5&#39;]
&#39;A:(3)/6&#39; -&gt; [&#39;A&#39;, &#39;&#39;, {&#39;3&#39;}, &#39;6&#39;]
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>chord_label: str</dt>
<dd><p class="first last">A chord label.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>chord_parts: list</dt>
<dd><p class="first last">Split version of the chord label.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.join">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">join</tt><big>(</big><em>root</em>, <em>quality=''</em>, <em>extensions=None</em>, <em>bass=''</em><big>)</big><a class="headerlink" href="#mir_eval.chord.join" title="Permalink to this definition">¶</a></dt>
<dd><p>Join the parts of a chord into a complete chord label.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>root: str</dt>
<dd><p class="first last">Root pitch class of the chord, e.g. &#8216;C&#8217;, &#8216;Eb&#8217;</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>quality: str</dt>
<dd><p class="first last">Quality of the chord, e.g. &#8216;maj&#8217;, &#8216;hdim7&#8217;</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>extensions: list</dt>
<dd><p class="first last">Any added or absent scaled degrees for this chord, e.g. [&#8216;4&#8217;, &#8216;*3&#8217;]</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>bass: str</dt>
<dd><p class="first last">Scale degree of the bass note, e.g. &#8216;5&#8217;.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><ul>
<li><dl class="first docutils">
<dt>chord_label: str</dt>
<dd><p class="first last">A complete chord label.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li>InvalidChordException: Thrown if the provided args yield a garbage chord label.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.encode">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">encode</tt><big>(</big><em>chord_label</em>, <em>reduce_extended_chords=False</em><big>)</big><a class="headerlink" href="#mir_eval.chord.encode" title="Permalink to this definition">¶</a></dt>
<dd><p>Translate a chord label to numerical representations for evaluation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>chord_label: str</dt>
<dd><p class="first last">Chord label to encode.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>reduce_extended_chords: bool, default=False</dt>
<dd><p class="first last">Map the upper voicings of extended chords (9&#8217;s, 11&#8217;s, 13&#8217;s) to semitone
extensions.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><dl class="docutils">
<dt>-root_number: int</dt>
<dd><p class="first last">Absolute semitone of the chord&#8217;s root.</p>
</dd>
</dl>
<ul>
<li><dl class="first docutils">
<dt>semitone_bitmap: np.ndarray of ints, in [0, 1]</dt>
<dd><p class="first last">12-dim vector of relative semitones in the chord spelling.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>bass_number: int</dt>
<dd><p class="first last">Relative semitone of the chord&#8217;s bass note, e.g. 0=root, 7=fifth, etc.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last">
<li><dl class="first docutils">
<dt>InvalidChordException: Thrown if the given bass note is not explicitly</dt>
<dd><p class="first last">named as an extension.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.encode_many">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">encode_many</tt><big>(</big><em>chord_labels</em>, <em>reduce_extended_chords=False</em><big>)</big><a class="headerlink" href="#mir_eval.chord.encode_many" title="Permalink to this definition">¶</a></dt>
<dd><p>Translate a set of chord labels to numerical representations for sane
evaluation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>chord_labels: list</dt>
<dd><p class="first last">Set of chord labels to encode.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>reduce_extended_chords: bool, default=True</dt>
<dd><p class="first last">Map the upper voicings of extended chords (9&#8217;s, 11&#8217;s, 13&#8217;s) to semitone
extensions.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><ul>
<li><dl class="first docutils">
<dt>root_number: np.ndarray of ints</dt>
<dd><p class="first last">Absolute semitone of the chord&#8217;s root.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>interval_bitmap: np.ndarray of ints, in [0, 1]</dt>
<dd><p class="first last">12-dim vector of relative semitones in the given chord quality.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>bass_number: np.ndarray</dt>
<dd><p class="first last">Relative semitones of the chord&#8217;s bass notes.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last">
<li><dl class="first docutils">
<dt>InvalidChordException</dt>
<dd><p class="first last">Thrown if the given bass note is not explicitly
named as an extension.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.rotate_bitmap_to_root">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">rotate_bitmap_to_root</tt><big>(</big><em>bitmap</em>, <em>root</em><big>)</big><a class="headerlink" href="#mir_eval.chord.rotate_bitmap_to_root" title="Permalink to this definition">¶</a></dt>
<dd><p>Circularly shift a relative bitmap to its asbolute pitch classes.</p>
<p>For clarity, the best explanation is an example. Given &#8216;G:Maj&#8217;, the root
and quality map are as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">root</span><span class="o">=</span><span class="mi">5</span>
<span class="n">quality</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>  <span class="c"># Relative chord shape</span>
</pre></div>
</div>
<p>After rotating to the root, the resulting bitmap becomes:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">abs_quality</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>  <span class="c"># G, B, and D</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>bitmap: np.ndarray, shape=(12,)</dt>
<dd><p class="first last">Bitmap of active notes, relative to the given root.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>root: int</dt>
<dd><p class="first last">Absolute pitch class number.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>bitmap: np.ndarray, shape=(12,)</dt>
<dd><p class="first last">Absolute bitmap of active pitch classes.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.rotate_bitmaps_to_roots">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">rotate_bitmaps_to_roots</tt><big>(</big><em>bitmaps</em>, <em>roots</em><big>)</big><a class="headerlink" href="#mir_eval.chord.rotate_bitmaps_to_roots" title="Permalink to this definition">¶</a></dt>
<dd><p>Circularly shift a relative bitmaps to asbolute pitch classes.</p>
<p>See rotate_bitmap_to_root for more information.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>bitmap: np.ndarray, shape=(N, 12)</dt>
<dd><p class="first last">Bitmap of active notes, relative to the given root.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>root: np.ndarray, shape=(N,)</dt>
<dd><p class="first last">Absolute pitch class number.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>bitmap: np.ndarray, shape=(N, 12)</dt>
<dd><p class="first last">Absolute bitmaps of active pitch classes.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.rotate_bass_to_root">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">rotate_bass_to_root</tt><big>(</big><em>bass</em>, <em>root</em><big>)</big><a class="headerlink" href="#mir_eval.chord.rotate_bass_to_root" title="Permalink to this definition">¶</a></dt>
<dd><p>Rotate a relative bass interval to its asbolute pitch class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>bass: int</dt>
<dd><p class="first last">Relative bass interval.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>root: int</dt>
<dd><p class="first last">Absolute root pitch class.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>bass: int</dt>
<dd><p class="first last">Pitch class of the bass intervalself.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.validate">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">validate</tt><big>(</big><em>comparison</em><big>)</big><a class="headerlink" href="#mir_eval.chord.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator which checks that the input annotations to a comparison
function look like valid chord labels.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>comparison <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">Chord label comparison function.  The two arguments must be
reference_labels and estimated_labels.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>comparison_validated <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">The function with the labels validated.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.score">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">score</tt><big>(</big><em>comparator</em><big>)</big><a class="headerlink" href="#mir_eval.chord.score" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to convert a comparator into a metric function.</p>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.thirds">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">thirds</tt><big>(</big><em>reference_labels</em>, <em>estimated_labels</em>, <em>intervals</em><big>)</big><a class="headerlink" href="#mir_eval.chord.thirds" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare chords along root &amp; third relationships.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;reference.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;estimate.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">adjust_intervals</span><span class="p">(</span>
<span class="go">    est_intervals, est_labels, ref_intervals.min(),</span>
<span class="go">    ref_intervals.max(), mir_eval.chord.NO_CHORD,</span>
<span class="go">    mir_eval.chord.NO_CHORD)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span><span class="p">,</span> <span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">merge_labeled_intervals</span><span class="p">(</span>
<span class="go">    ref_intervals, ref_labels, est_intervals, est_labels)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">chord</span><span class="o">.</span><span class="n">thirds</span><span class="p">(</span><span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span><span class="p">,</span> <span class="n">intervals</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Reference chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Estimated chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n, 2)</span></dt>
<dd><p class="first last">Start and end time of each chord label</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>comparison_scores <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n,), dtype=np.float</span></dt>
<dd><p class="first last">Comparison scores, in [0.0, 1.0]</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.thirds_inv">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">thirds_inv</tt><big>(</big><em>reference_labels</em>, <em>estimated_labels</em>, <em>intervals</em><big>)</big><a class="headerlink" href="#mir_eval.chord.thirds_inv" title="Permalink to this definition">¶</a></dt>
<dd><p>Score chords along root, third, &amp; bass relationships.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;reference.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;estimate.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">adjust_intervals</span><span class="p">(</span>
<span class="go">    est_intervals, est_labels, ref_intervals.min(),</span>
<span class="go">    ref_intervals.max(), mir_eval.chord.NO_CHORD,</span>
<span class="go">    mir_eval.chord.NO_CHORD)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span><span class="p">,</span> <span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">merge_labeled_intervals</span><span class="p">(</span>
<span class="go">    ref_intervals, ref_labels, est_intervals, est_labels)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">chord</span><span class="o">.</span><span class="n">thirds_inv</span><span class="p">(</span><span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span><span class="p">,</span> <span class="n">intervals</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Reference chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Estimated chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n, 2)</span></dt>
<dd><p class="first last">Start and end time of each chord label</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>scores <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n,), dtype=np.float</span></dt>
<dd><p class="first last">Comparison scores, in [0.0, 1.0]</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.triads">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">triads</tt><big>(</big><em>reference_labels</em>, <em>estimated_labels</em>, <em>intervals</em><big>)</big><a class="headerlink" href="#mir_eval.chord.triads" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare chords along triad (root &amp; quality to #5) relationships.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;reference.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;estimate.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">adjust_intervals</span><span class="p">(</span>
<span class="go">    est_intervals, est_labels, ref_intervals.min(),</span>
<span class="go">    ref_intervals.max(), mir_eval.chord.NO_CHORD,</span>
<span class="go">    mir_eval.chord.NO_CHORD)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span><span class="p">,</span> <span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">merge_labeled_intervals</span><span class="p">(</span>
<span class="go">    ref_intervals, ref_labels, est_intervals, est_labels)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">chord</span><span class="o">.</span><span class="n">triads</span><span class="p">(</span><span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span><span class="p">,</span> <span class="n">intervals</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Reference chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Estimated chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n, 2)</span></dt>
<dd><p class="first last">Start and end time of each chord label</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>comparison_scores <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n,), dtype=np.float</span></dt>
<dd><p class="first last">Comparison scores, in {0.0, 1.0}</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.triads_inv">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">triads_inv</tt><big>(</big><em>reference_labels</em>, <em>estimated_labels</em>, <em>intervals</em><big>)</big><a class="headerlink" href="#mir_eval.chord.triads_inv" title="Permalink to this definition">¶</a></dt>
<dd><p>Score chords along triad (root, quality to #5, &amp; bass) relationships.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;reference.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;estimate.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">adjust_intervals</span><span class="p">(</span>
<span class="go">    est_intervals, est_labels, ref_intervals.min(),</span>
<span class="go">    ref_intervals.max(), mir_eval.chord.NO_CHORD,</span>
<span class="go">    mir_eval.chord.NO_CHORD)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span><span class="p">,</span> <span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">merge_labeled_intervals</span><span class="p">(</span>
<span class="go">    ref_intervals, ref_labels, est_intervals, est_labels)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">chord</span><span class="o">.</span><span class="n">triads_inv</span><span class="p">(</span><span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span><span class="p">,</span> <span class="n">intervals</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Reference chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Estimated chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n, 2)</span></dt>
<dd><p class="first last">Start and end time of each chord label</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>scores <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n,), dtype=np.float</span></dt>
<dd><p class="first last">Comparison scores, in {0.0, 1.0}</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.tetrads">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">tetrads</tt><big>(</big><em>reference_labels</em>, <em>estimated_labels</em>, <em>intervals</em><big>)</big><a class="headerlink" href="#mir_eval.chord.tetrads" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare chords along tetrad (root &amp; full quality) relationships.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;reference.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;estimate.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">adjust_intervals</span><span class="p">(</span>
<span class="go">    est_intervals, est_labels, ref_intervals.min(),</span>
<span class="go">    ref_intervals.max(), mir_eval.chord.NO_CHORD,</span>
<span class="go">    mir_eval.chord.NO_CHORD)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span><span class="p">,</span> <span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">merge_labeled_intervals</span><span class="p">(</span>
<span class="go">    ref_intervals, ref_labels, est_intervals, est_labels)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">chord</span><span class="o">.</span><span class="n">tetrads</span><span class="p">(</span><span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span><span class="p">,</span> <span class="n">intervals</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Reference chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Estimated chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n, 2)</span></dt>
<dd><p class="first last">Start and end time of each chord label</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>comparison_scores <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n,), dtype=np.float</span></dt>
<dd><p class="first last">Comparison scores, in {0.0, 1.0}</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.tetrads_inv">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">tetrads_inv</tt><big>(</big><em>reference_labels</em>, <em>estimated_labels</em>, <em>intervals</em><big>)</big><a class="headerlink" href="#mir_eval.chord.tetrads_inv" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare chords along seventh (root, quality) relationships.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;reference.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;estimate.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">adjust_intervals</span><span class="p">(</span>
<span class="go">    est_intervals, est_labels, ref_intervals.min(),</span>
<span class="go">    ref_intervals.max(), mir_eval.chord.NO_CHORD,</span>
<span class="go">    mir_eval.chord.NO_CHORD)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span><span class="p">,</span> <span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">merge_labeled_intervals</span><span class="p">(</span>
<span class="go">    ref_intervals, ref_labels, est_intervals, est_labels)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">chord</span><span class="o">.</span><span class="n">tetrads_inv</span><span class="p">(</span><span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span><span class="p">,</span> <span class="n">intervals</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Reference chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Estimated chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n, 2)</span></dt>
<dd><p class="first last">Start and end time of each chord label</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>comparison_scores <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n,), dtype=np.float</span></dt>
<dd><p class="first last">Comparison scores, in {0.0, 1.0}</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.root">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">root</tt><big>(</big><em>reference_labels</em>, <em>estimated_labels</em>, <em>intervals</em><big>)</big><a class="headerlink" href="#mir_eval.chord.root" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare chords according to roots.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;reference.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;estimate.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">adjust_intervals</span><span class="p">(</span>
<span class="go">    est_intervals, est_labels, ref_intervals.min(),</span>
<span class="go">    ref_intervals.max(), mir_eval.chord.NO_CHORD,</span>
<span class="go">    mir_eval.chord.NO_CHORD)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span><span class="p">,</span> <span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">merge_labeled_intervals</span><span class="p">(</span>
<span class="go">    ref_intervals, ref_labels, est_intervals, est_labels)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">chord</span><span class="o">.</span><span class="n">root</span><span class="p">(</span><span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span><span class="p">,</span> <span class="n">intervals</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Reference chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Estimated chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n, 2)</span></dt>
<dd><p class="first last">Start and end time of each chord label</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>comparison_scores <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n,), dtype=np.float</span></dt>
<dd><p class="first last">Comparison scores, in [0.0, 1.0], or -1 if the comparison is out of
gamut.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.mirex">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">mirex</tt><big>(</big><em>reference_labels</em>, <em>estimated_labels</em>, <em>intervals</em><big>)</big><a class="headerlink" href="#mir_eval.chord.mirex" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare chords along MIREX rules.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;reference.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;estimate.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">adjust_intervals</span><span class="p">(</span>
<span class="go">    est_intervals, est_labels, ref_intervals.min(),</span>
<span class="go">    ref_intervals.max(), mir_eval.chord.NO_CHORD,</span>
<span class="go">    mir_eval.chord.NO_CHORD)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span><span class="p">,</span> <span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">merge_labeled_intervals</span><span class="p">(</span>
<span class="go">    ref_intervals, ref_labels, est_intervals, est_labels)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">chord</span><span class="o">.</span><span class="n">mirex</span><span class="p">(</span><span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span><span class="p">,</span> <span class="n">intervals</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Reference chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Estimated chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n, 2)</span></dt>
<dd><p class="first last">Start and end time of each chord label</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>comparison_scores <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n,), dtype=np.float</span></dt>
<dd><p class="first last">Comparison scores, in {0.0, 1.0}</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.majmin">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">majmin</tt><big>(</big><em>reference_labels</em>, <em>estimated_labels</em>, <em>intervals</em><big>)</big><a class="headerlink" href="#mir_eval.chord.majmin" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare chords along major-minor rules. Chords with qualities outside
Major/minor/no-chord are ignored.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;reference.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;estimate.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">adjust_intervals</span><span class="p">(</span>
<span class="go">    est_intervals, est_labels, ref_intervals.min(),</span>
<span class="go">    ref_intervals.max(), mir_eval.chord.NO_CHORD,</span>
<span class="go">    mir_eval.chord.NO_CHORD)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span><span class="p">,</span> <span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">merge_labeled_intervals</span><span class="p">(</span>
<span class="go">    ref_intervals, ref_labels, est_intervals, est_labels)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">chord</span><span class="o">.</span><span class="n">majmin</span><span class="p">(</span><span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span><span class="p">,</span> <span class="n">intervals</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Reference chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Estimated chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n, 2)</span></dt>
<dd><p class="first last">Start and end time of each chord label</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>comparison_scores <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n,), dtype=np.float</span></dt>
<dd><p class="first last">Comparison scores, in [0.0, 1.0], or -1 if the comparison is out of
gamut.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.majmin_inv">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">majmin_inv</tt><big>(</big><em>reference_labels</em>, <em>estimated_labels</em>, <em>intervals</em><big>)</big><a class="headerlink" href="#mir_eval.chord.majmin_inv" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare chords along major-minor rules, with inversions. Chords with
qualities outside Major/minor/no-chord are ignored, and the bass note must
exist in the triad (bass in [1, 3, 5]).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;reference.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;estimate.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">adjust_intervals</span><span class="p">(</span>
<span class="go">    est_intervals, est_labels, ref_intervals.min(),</span>
<span class="go">    ref_intervals.max(), mir_eval.chord.NO_CHORD,</span>
<span class="go">    mir_eval.chord.NO_CHORD)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span><span class="p">,</span> <span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">merge_labeled_intervals</span><span class="p">(</span>
<span class="go">    ref_intervals, ref_labels, est_intervals, est_labels)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">chord</span><span class="o">.</span><span class="n">majmin_inv</span><span class="p">(</span><span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span><span class="p">,</span> <span class="n">intervals</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Reference chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Estimated chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n, 2)</span></dt>
<dd><p class="first last">Start and end time of each chord label</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>comparison_scores <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n,), dtype=np.float</span></dt>
<dd><p class="first last">Comparison scores, in [0.0, 1.0], or -1 if the comparison is out of
gamut.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.sevenths">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">sevenths</tt><big>(</big><em>reference_labels</em>, <em>estimated_labels</em>, <em>intervals</em><big>)</big><a class="headerlink" href="#mir_eval.chord.sevenths" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare chords along MIREX &#8216;sevenths&#8217; rules. Chords with qualities
outside [maj, maj7, 7, min, min7, N] are ignored.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;reference.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;estimate.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">adjust_intervals</span><span class="p">(</span>
<span class="go">    est_intervals, est_labels, ref_intervals.min(),</span>
<span class="go">    ref_intervals.max(), mir_eval.chord.NO_CHORD,</span>
<span class="go">    mir_eval.chord.NO_CHORD)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span><span class="p">,</span> <span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">merge_labeled_intervals</span><span class="p">(</span>
<span class="go">    ref_intervals, ref_labels, est_intervals, est_labels)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">chord</span><span class="o">.</span><span class="n">sevenths</span><span class="p">(</span><span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span><span class="p">,</span> <span class="n">intervals</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Reference chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Estimated chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n, 2)</span></dt>
<dd><p class="first last">Start and end time of each chord label</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>comparison_scores <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n,), dtype=np.float</span></dt>
<dd><p class="first last">Comparison scores, in [0.0, 1.0], or -1 if the comparison is out of
gamut.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.sevenths_inv">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">sevenths_inv</tt><big>(</big><em>reference_labels</em>, <em>estimated_labels</em>, <em>intervals</em><big>)</big><a class="headerlink" href="#mir_eval.chord.sevenths_inv" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare chords along MIREX &#8216;sevenths&#8217; rules. Chords with qualities
outside [maj, maj7, 7, min, min7, N] are ignored.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;reference.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;estimate.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">adjust_intervals</span><span class="p">(</span>
<span class="go">    est_intervals, est_labels, ref_intervals.min(),</span>
<span class="go">    ref_intervals.max(), mir_eval.chord.NO_CHORD,</span>
<span class="go">    mir_eval.chord.NO_CHORD)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span><span class="p">,</span> <span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">merge_labeled_intervals</span><span class="p">(</span>
<span class="go">    ref_intervals, ref_labels, est_intervals, est_labels)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">score</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">chord</span><span class="o">.</span><span class="n">sevenths_inv</span><span class="p">(</span><span class="n">ref_labels</span><span class="p">,</span> <span class="n">est_labels</span><span class="p">,</span> <span class="n">intervals</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Reference chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n</span></dt>
<dd><p class="first last">Estimated chord labels to score against.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n, 2)</span></dt>
<dd><p class="first last">Start and end time of each chord label</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>comparison_scores <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n,), dtype=np.float</span></dt>
<dd><p class="first last">Comparison scores, in [0.0, 1.0], or -1 if the comparison is out of
gamut.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.chord.evaluate_file_pair">
<tt class="descclassname">mir_eval.chord.</tt><tt class="descname">evaluate_file_pair</tt><big>(</big><em>reference_file, estimation_file, vocabularies=['majmin'], boundary_mode='fit-to-ref'</em><big>)</big><a class="headerlink" href="#mir_eval.chord.evaluate_file_pair" title="Permalink to this definition">¶</a></dt>
<dd><p>Load data and perform the evaluation between a pair of annotations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_file <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Path to a reference annotation.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimation_file <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Path to an estimated annotation.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>vocabularies <span class="classifier-delimiter">:</span> <span class="classifier">list of strings</span></dt>
<dd><p class="first last">Comparisons to make between the reference and estimated sequences.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>boundary_mode <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><dl class="first last docutils">
<dt>Method for resolving sequences of different lengths, one of:</dt>
<dd><dl class="first last docutils">
<dt>&#8216;intersect&#8217;: </dt>
<dd><p class="first last">Truncate both to the time range on with both sequences are defined.</p>
</dd>
<dt>&#8216;fit-to-ref&#8217;: </dt>
<dd><p class="first last">Pad the estimation to match the reference, filling missing labels with &#8216;no-chord&#8217;.</p>
</dd>
<dt>&#8216;fit-to-est&#8217;: </dt>
<dd><p class="first last">Pad the reference to match the estimation, filling missing labels with &#8216;no-chord&#8217;.</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>result <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">Dictionary containing the averaged scores for each vocabulary, along
with the total duration of the file (&#8216;_weight&#8217;) and any errors
(&#8216;_error&#8217;) caught in the process.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="module-mir_eval.mm_chord">
<span id="mir-eval-mm-chord"></span><h2>mir_eval.mm_chord<a class="headerlink" href="#module-mir_eval.mm_chord" title="Permalink to this headline">¶</a></h2>
<p>Methods for evaluating chord recognition algorithms.</p>
<dl class="function">
<dt id="mir_eval.mm_chord.evaluate_chords">
<tt class="descclassname">mir_eval.mm_chord.</tt><tt class="descname">evaluate_chords</tt><big>(</big><em>GT</em>, <em>P</em>, <em>resolution=0.001</em>, <em>trim_method='min'</em>, <em>method='MIREX'</em>, <em>augdim_switch=True</em><big>)</big><a class="headerlink" href="#mir_eval.mm_chord.evaluate_chords" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate two chord transcriptions. Each should be a list of tuples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">GT</span> <span class="o">=</span> <span class="p">[(</span><span class="n">start_1</span><span class="p">,</span> <span class="n">end_1</span><span class="p">,</span> <span class="n">chord_1</span><span class="p">),</span> <span class="o">...</span> <span class="p">,</span> <span class="p">(</span><span class="n">start_n</span><span class="p">,</span> <span class="n">end_n</span><span class="p">,</span> <span class="n">chord_n</span><span class="p">)]</span>
<span class="n">P</span>  <span class="o">=</span> <span class="p">[(</span><span class="n">start_1</span><span class="p">,</span> <span class="n">end_1</span><span class="p">,</span> <span class="n">chord_1</span><span class="p">),</span> <span class="o">...</span> <span class="p">,</span> <span class="p">(</span><span class="n">start_m</span><span class="p">,</span> <span class="n">end_m</span><span class="p">,</span> <span class="n">chord_m</span><span class="p">)]</span>
</pre></div>
</div>
<p>times measured in seconds, chords in Chris Harte&#8217;s format:</p>
<p><a class="reference external" href="http://ismir2005.ismir.net/proceedings/1080.pdf">http://ismir2005.ismir.net/proceedings/1080.pdf</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Inputs:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>GT: list of tuples          </dt>
<dd><p class="first last">Ground truth chords</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>P: list of tuples</dt>
<dd><p class="first last">Predicted chords</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>resolution: float</dt>
<dd><p class="first last">frame rate to use.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>trim_method: string</dt>
<dd><dl class="first last docutils">
<dt>how to deal with predictions and gts of different length. One of:</dt>
<dd><dl class="first last docutils">
<dt>&#8216;min&#8217;</dt>
<dd><p class="first last">choose the true length to be minimum of 
gt and p. Everything else is trimmed off</p>
</dd>
<dt>&#8216;max&#8217;</dt>
<dd><p class="first last">true length is max. Anything shorter is 
scored as 0.0</p>
</dd>
<dt>&#8216;GT&#8217;</dt>
<dd><p class="first last">always trust the GT length</p>
</dd>
<dt>&#8216;P&#8217;</dt>
<dd><p class="first last">always trust the P length</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>method: string</dt>
<dd><dl class="first last docutils">
<dt>scoring method. currently supported:</dt>
<dd><dl class="first last docutils">
<dt>&#8216;MIREX&#8217;</dt>
<dd><dl class="first last docutils">
<dt>count pitch class overlap. Requires an additional switch argument:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>augdim_switch: Boolean</dt>
<dd><p class="first last">If True, only require 2 pitch classes in common
with gt to get a point for augmented
or diminished chords and 3 otherwise.
Strange, but seems to be what MIREX team 
does.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</dd>
<dt>&#8216;Correct&#8217;</dt>
<dd><p class="first last">chords are correct only if they are identical,
including enharmonics ie &#8216;F#:maj&#8217; != &#8216;Gb:maj&#8217;</p>
</dd>
<dt>&#8216;Correct_at_pitchclass&#8217;</dt>
<dd><p class="first last">chords are reduced to pitch classes, 
and compared at this level. This means that 
enharmonics and inversions are considered equal
i.e. score(&#8216;F#:maj&#8217;, &#8216;Gb:maj&#8217;) = 1.0 and 
score(&#8216;C:maj6&#8217; = [C,E,G,A], &#8216;A:min7&#8217; = [A,C,E,G]) = 1.0</p>
</dd>
<dt>&#8216;Correct_at_minmaj&#8217;</dt>
<dd><p class="first last">chords are mapped to major or minor triads,
and compared at this level. For example,
score(&#8216;A:7&#8217;, &#8216;A:maj&#8217;) = 1.0, but also
score(&#8216;A:min&#8217;, &#8216;A:dim&#8217;) = 1.0 as dim gets 
mapped to min. Probably a bit sketchy, 
but is a common metric</p>
</dd>
<dt>&#8216;Correct_at_triad&#8217;</dt>
<dd><p class="first last">chords are mapped to triad (major, minor, 
augmented, diminished, suspended) and 
compared at this level. For example, 
score(&#8216;A:7&#8217;,&#8217;A:maj&#8217;) = 1.0, 
score(&#8216;A:min&#8217;, &#8216;A:dim&#8217;) = 0.0</p>
</dd>
<dt>&#8216;Correct_at_seventh&#8217;</dt>
<dd><p class="first last">chords are mapped to 7th type (7, maj7, 
min7, minmaj7, susb7, dim7) and compared
at this level. For example:
score(&#8216;A:7&#8217;, &#8216;A:9&#8217;) = 1.0, 
score(&#8216;A:7&#8217;, &#8216;A:maj7&#8217;) = 0.0</p>
</dd>
<dt>&#8216;Pitchclass_recall&#8217;</dt>
<dd><p class="first last">recall on pitch classes in GT/P. Chords are not
reduced to a simpler alphabet in this evaluation</p>
</dd>
<dt>&#8216;Pitchclass_precision&#8217;</dt>
<dd><p class="first last">precision on pitch classes in GT/P. Chords are not
reduced to a simpler alphabet in this evaluation</p>
</dd>
<dt>&#8216;Pitchclass_f&#8217;</dt>
<dd><p class="first last">f-measure on pitch classes. Chords are not
reduced to a simpler alphabet in this evaluation</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Outputs:</th><td class="field-body"><ul class="first last">
<li><dl class="first docutils">
<dt>accuracy: float    </dt>
<dd><p class="first last">The accuracy figure</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>GT_sample: list</dt>
<dd><p class="first last">List of sampled GT annotations</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>P_sample: list</dt>
<dd><p class="first last">List of sampled Predictions</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.mm_chord.score_two_chords">
<tt class="descclassname">mir_eval.mm_chord.</tt><tt class="descname">score_two_chords</tt><big>(</big><em>p</em>, <em>gt</em>, <em>method='MIREX'</em>, <em>augdim_switch=True</em><big>)</big><a class="headerlink" href="#mir_eval.mm_chord.score_two_chords" title="Permalink to this definition">¶</a></dt>
<dd><p>Scores two chords against each other</p>
</dd></dl>

<dl class="function">
<dt id="mir_eval.mm_chord.reduce_chords">
<tt class="descclassname">mir_eval.mm_chord.</tt><tt class="descname">reduce_chords</tt><big>(</big><em>chords</em>, <em>alphabet</em><big>)</big><a class="headerlink" href="#mir_eval.mm_chord.reduce_chords" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="mir_eval.mm_chord.chord_2_rootchordbass">
<tt class="descclassname">mir_eval.mm_chord.</tt><tt class="descname">chord_2_rootchordbass</tt><big>(</big><em>chord</em><big>)</big><a class="headerlink" href="#mir_eval.mm_chord.chord_2_rootchordbass" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-mir_eval.input_output">
<span id="mir-eval-input-output"></span><h2>mir_eval.input_output<a class="headerlink" href="#module-mir_eval.input_output" title="Permalink to this headline">¶</a></h2>
<p>Annotation input/output functions</p>
<dl class="function">
<dt id="mir_eval.input_output.load_events">
<tt class="descclassname">mir_eval.input_output.</tt><tt class="descname">load_events</tt><big>(</big><em>filename</em>, <em>delimiter='\\s+'</em>, <em>converter=None</em>, <em>label_prefix='__'</em><big>)</big><a class="headerlink" href="#mir_eval.input_output.load_events" title="Permalink to this definition">¶</a></dt>
<dd><p>Import time-stamp events from an annotation file.  This is primarily useful for
processing events which lack duration, such as beats or onsets.</p>
<dl class="docutils">
<dt>The annotation file may be either of two formats:</dt>
<dd><ul class="first last simple">
<li>Single-column.  Each line contains a single value, corresponding to the time of
the annotated event.</li>
<li>Double-column.  Each line contains two values, separated by <tt class="docutils literal"><span class="pre">delimiter</span></tt>: the
first contains the time of the annotated event, and the second contains its
label.</li>
</ul>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>filename <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Path to the annotation file</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>delimiter <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Separator regular expression.
By default, lines will be split by any amount of whitespace (&#8216;s+&#8217;)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>converter <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">Function to convert time-stamp data into numerics. Defaults to float().</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>label_prefix <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">String to append to any synthetically generated labels</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>event_times <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">array of event times (float)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>event_labels <span class="classifier-delimiter">:</span> <span class="classifier">list of str</span></dt>
<dd><p class="first last">list of corresponding event labels</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.input_output.load_intervals">
<tt class="descclassname">mir_eval.input_output.</tt><tt class="descname">load_intervals</tt><big>(</big><em>filename</em>, <em>delimiter='\\s+'</em>, <em>converter=None</em>, <em>label_prefix='__'</em><big>)</big><a class="headerlink" href="#mir_eval.input_output.load_intervals" title="Permalink to this definition">¶</a></dt>
<dd><p>Import labeled intervals from an annotation file.  This is primarily useful for
processing events which span a duration, such as segmentation, chords, or instrument
activation.</p>
<dl class="docutils">
<dt>The annotation file may be either of two formats:</dt>
<dd><ul class="first last simple">
<li>Double-column.  Each line contains two values, separated by <tt class="docutils literal"><span class="pre">delimiter</span></tt>,
corresponding to the start and end time annotated event.</li>
<li>Triple-column.  Each line contains three values, separated by <tt class="docutils literal"><span class="pre">delimiter</span></tt>.
The first two values specify the start and end times, the last value specifies
the label for the event (e.g. &#8220;Verse&#8221; or &#8220;A:min&#8221;).</li>
</ul>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>filename <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Path to the annotation file</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>delimiter <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Separator regular expression.
By default, lines will be split by any amount of whitespace (&#8216;s+&#8217;)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>converter <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">Function to convert time-stamp data into numerics. Defaults to float().</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>label_prefix <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">String to append to any synthetically generated labels</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>event_times <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n_events, 2)</span></dt>
<dd><p class="first last">array of event start and end times</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>event_labels <span class="classifier-delimiter">:</span> <span class="classifier">list of str</span></dt>
<dd><p class="first last">list of corresponding event labels</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.input_output.load_time_series">
<tt class="descclassname">mir_eval.input_output.</tt><tt class="descname">load_time_series</tt><big>(</big><em>filename</em>, <em>delimiter=None</em><big>)</big><a class="headerlink" href="#mir_eval.input_output.load_time_series" title="Permalink to this definition">¶</a></dt>
<dd><p>Import a time series from an annotation file.  This is primarily useful for
processing dense time series with timestamps and corresponding numeric values</p>
<dl class="docutils">
<dt>The annotation file must be of the following format:</dt>
<dd><ul class="first last simple">
<li>Double-column.  Each line contains two values, separated by <tt class="docutils literal"><span class="pre">delimiter</span></tt>: the
first contains the timestamp, and the second contains its corresponding
numeric value.</li>
</ul>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>filename <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Path to the annotation file</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>delimiter <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Column separator. By default, lines will be split by any amount of
whitespace, unless the file ending is .csv, in which case a comma &#8216;,&#8217;
is used as the delimiter.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>times <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">array of timestamps (float)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>values <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">array of corresponding numeric values (float)</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.input_output.load_patterns">
<tt class="descclassname">mir_eval.input_output.</tt><tt class="descname">load_patterns</tt><big>(</big><em>filename</em><big>)</big><a class="headerlink" href="#mir_eval.input_output.load_patterns" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads the patters contained in the filename and puts them into a list
of patterns, each pattern being a list of occurrence, and each
occurrence being a list of (onset, midi) pairs.</p>
<dl class="docutils">
<dt>The input file must be formatted as described in MIREX 2013:</dt>
<dd><a class="reference external" href="http://www.music-ir.org/mirex/wiki/2013:Discovery_of_Repeated_Themes_%26_Sections">http://www.music-ir.org/mirex/wiki/2013:Discovery_of_Repeated_Themes_%26_Sections</a></dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Params:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>filename: str</dt>
<dd><p class="first last">The input file path containing the patterns of a given
given piece using the MIREX 2013 format.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>list: list </dt>
<dd><p class="first">the list of patterns, containing all their occurrences,
using the following format:</p>
<div class="last highlight-python"><div class="highlight"><pre>P = [pattern1, ..., patternN]
pattern = [occurrence1, ..., occurrenceM]
occurrence = [onset_midi1, ..., onset_midiO]
onset_midi = (onset_time, midi_number)

E.g.:
P = [[[(77.0, 67.0), (77.5, 77.0), ... ]]]
</pre></div>
</div>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-mir_eval.melody">
<span id="mir-eval-melody"></span><h2>mir_eval.melody<a class="headerlink" href="#module-mir_eval.melody" title="Permalink to this headline">¶</a></h2>
<p>Melody extraction evaluation, based on the protocols used in MIREX since 2005.</p>
<p>For a detailed explanation of the measures please refer to:
J. Salamon, E. Gomez, D. P. W. Ellis and G. Richard, &#8220;Melody Extraction
from Polyphonic Music Signals: Approaches, Applications and Challenges&#8221;,
IEEE Signal Processing Magazine, 31(2):118-134, Mar. 2014.</p>
<dl class="function">
<dt id="mir_eval.melody.validate_voicing">
<tt class="descclassname">mir_eval.melody.</tt><tt class="descname">validate_voicing</tt><big>(</big><em>metric</em><big>)</big><a class="headerlink" href="#mir_eval.melody.validate_voicing" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator which checks that voicing inputs to a metric
are in the correct format.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>metric <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">Evaluation metric function.  First two arguments must be
ref_voicing and est_voicing.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>metric_validated <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">The function with the beat times validated</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.melody.validate">
<tt class="descclassname">mir_eval.melody.</tt><tt class="descname">validate</tt><big>(</big><em>metric</em><big>)</big><a class="headerlink" href="#mir_eval.melody.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator which checks that voicing and frequency arrays are well-formed.
To be used in conjunction with validate_voicing</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>metric <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">Evaluation metric function.  First four arguments must be
ref_voicing, est_voicing, ref_cent, est_cent</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>metric_validated <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">The function with the beat times validated</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.melody.hz2cents">
<tt class="descclassname">mir_eval.melody.</tt><tt class="descname">hz2cents</tt><big>(</big><em>freq_hz</em>, <em>base_frequency=10.0</em><big>)</big><a class="headerlink" href="#mir_eval.melody.hz2cents" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an array of frequency values in Hz to cents
0 values are left in place.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>freq_hz <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Array of frequencies in Hz.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>base_frequency <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Base frequency for conversion.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>cent <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Array of frequencies in cents, relative to base_frequency</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.melody.freq_to_voicing">
<tt class="descclassname">mir_eval.melody.</tt><tt class="descname">freq_to_voicing</tt><big>(</big><em>frequencies</em><big>)</big><a class="headerlink" href="#mir_eval.melody.freq_to_voicing" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert from an array of frequency values to frequency array + voice/unvoiced array</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>frequencies <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Array of frequencies.  A frequency &lt;= 0 indicates &#8220;unvoiced&#8221;.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>frequencies <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Array of frequencies, all &gt;= 0.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>voiced <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Boolean array, same length as frequencies, which indicates voiced or unvoiced</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.melody.constant_hop_timebase">
<tt class="descclassname">mir_eval.melody.</tt><tt class="descname">constant_hop_timebase</tt><big>(</big><em>hop</em>, <em>end_time</em><big>)</big><a class="headerlink" href="#mir_eval.melody.constant_hop_timebase" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a time series from 0 to end_time with times spaced hop apart</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>hop <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Spacing of samples in the time series</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>end_time <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Time series will span [0, end_time]</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>times <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Generated timebase</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.melody.resample_melody_series">
<tt class="descclassname">mir_eval.melody.</tt><tt class="descname">resample_melody_series</tt><big>(</big><em>times</em>, <em>frequencies</em>, <em>voicing</em>, <em>times_new</em>, <em>kind='linear'</em><big>)</big><a class="headerlink" href="#mir_eval.melody.resample_melody_series" title="Permalink to this definition">¶</a></dt>
<dd><p>Resamples frequency and voicing time series to a new timescale.
Maintains any zero (&#8220;unvoiced&#8221;) values in frequencies.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>times <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Times of each frequency value</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>frequencies <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Array of frequency values, &gt;= 0</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>voicing <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Boolean array which indicates voiced or unvoiced</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>times_new <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Times to resample frequency and voicing sequences to</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>kind <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">kind parameter to pass to scipy.interpolate.interp1d.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>frequencies_resampled <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Frequency array resampled to new timebase</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>voicing_resampled <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Boolean voicing array resampled to new timebase</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.melody.to_cent_voicing">
<tt class="descclassname">mir_eval.melody.</tt><tt class="descname">to_cent_voicing</tt><big>(</big><em>ref_time</em>, <em>ref_freq</em>, <em>est_time</em>, <em>est_freq</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.melody.to_cent_voicing" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts reference and estimated time/frequency (Hz) annotations to
sampled frequency (cent)/voicing arrays.</p>
<p>A zero frequency indicates &#8220;unvoiced&#8221;.</p>
<p>A negative frequency indicates &#8220;Predicted as unvoiced,
but if it&#8217;s voiced, this is the frequency estimate&#8221;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>ref_time <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Time of each reference frequency value</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>ref_freq <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Array of reference frequency values</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>est_time <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Time of each estimated frequency value</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>est_freq <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Array of estimated frequency values</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>base_frequency <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Base frequency in Hz for conversion to cents, default 10.0</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>hop <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Hop size, in seconds, to resample, default None which means use ref_time</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>kind <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">kind parameter to pass to scipy.interpolate.interp1d.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>ref_voicing <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Resampled reference boolean voicing array</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>est_voicing <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Resampled estimated boolean voicing array</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>ref_cent <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Resampled reference frequency (cent) array</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>est_cent <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Resampled estimated frequency (cent) array</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.melody.voicing_measures">
<tt class="descclassname">mir_eval.melody.</tt><tt class="descname">voicing_measures</tt><big>(</big><em>ref_voicing</em>, <em>est_voicing</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.melody.voicing_measures" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the voicing recall and false alarm rates given two voicing indicator
sequences, one as reference (truth) and the other as the estimate (prediction).
The sequences must be of the same length.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_time</span><span class="p">,</span> <span class="n">ref_freq</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_time_series</span><span class="p">(</span><span class="n">reference_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_time</span><span class="p">,</span> <span class="n">est_freq</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_time_series</span><span class="p">(</span><span class="n">estimated_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ref_v</span><span class="p">,</span> <span class="n">est_v</span><span class="p">,</span> <span class="n">ref_c</span><span class="p">,</span> <span class="n">est_c</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">melody</span><span class="o">.</span><span class="n">to_cent_voicing</span><span class="p">(</span><span class="n">ref_time</span><span class="p">,</span> <span class="n">ref_freq</span><span class="p">,</span>
<span class="go">                                                                 est_time, est_freq)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">recall</span><span class="p">,</span> <span class="n">false_alarm</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">melody</span><span class="o">.</span><span class="n">voicing_measures</span><span class="p">(</span><span class="n">ref_v</span><span class="p">,</span> <span class="n">est_v</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>ref_voicing <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Reference boolean voicing array</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>est_voicing <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Estimated boolean voicing array</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>vx_recall <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Voicing recall rate, the fraction of voiced frames in ref indicated as voiced in est</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>vx_false_alarm <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Voicing false alarm rate, the fraction of unvoiced frames in ref indicated as voiced in est</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.melody.raw_pitch_accuracy">
<tt class="descclassname">mir_eval.melody.</tt><tt class="descname">raw_pitch_accuracy</tt><big>(</big><em>ref_voicing</em>, <em>est_voicing</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.melody.raw_pitch_accuracy" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the raw pitch accuracy given two pitch (frequency) sequences in cents
and matching voicing indicator sequences. The first pitch and voicing arrays
are treated as the reference (truth), and the second two as the estimate (prediction).
All 4 sequences must be of the same length.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_time</span><span class="p">,</span> <span class="n">ref_freq</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_time_series</span><span class="p">(</span><span class="n">reference_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_time</span><span class="p">,</span> <span class="n">est_freq</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_time_series</span><span class="p">(</span><span class="n">estimated_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ref_v</span><span class="p">,</span> <span class="n">est_v</span><span class="p">,</span> <span class="n">ref_c</span><span class="p">,</span> <span class="n">est_c</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">melody</span><span class="o">.</span><span class="n">to_cent_voicing</span><span class="p">(</span><span class="n">ref_time</span><span class="p">,</span> <span class="n">ref_freq</span><span class="p">,</span>
<span class="go">                                                                 est_time, est_freq)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">raw_pitch</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">melody</span><span class="o">.</span><span class="n">raw_pitch_accuracy</span><span class="p">(</span><span class="n">ref_v</span><span class="p">,</span> <span class="n">est_v</span><span class="p">,</span> <span class="n">ref_c</span><span class="p">,</span> <span class="n">est_c</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>ref_voicing <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Reference boolean voicing array</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>est_voicing <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Estimated boolean voicing array</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>ref_cent <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Reference pitch sequence in cents</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>est_cent <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Estimate pitch sequence in cents</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>raw_pitch <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Raw pitch accuracy, the fraction of voiced frames in ref_cent for which est_cent
provides a correct frequency values (within 50 cents).</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.melody.raw_chroma_accuracy">
<tt class="descclassname">mir_eval.melody.</tt><tt class="descname">raw_chroma_accuracy</tt><big>(</big><em>ref_voicing</em>, <em>est_voicing</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.melody.raw_chroma_accuracy" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the raw chroma accuracy given two pitch (frequency) sequences in cents
and matching voicing indicator sequences. The first pitch and voicing arrays
are treated as the reference (truth), and the second two as the estimate (prediction).
All 4 sequences must be of the same length.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_time</span><span class="p">,</span> <span class="n">ref_freq</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_time_series</span><span class="p">(</span><span class="n">reference_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_time</span><span class="p">,</span> <span class="n">est_freq</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_time_series</span><span class="p">(</span><span class="n">estimated_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ref_v</span><span class="p">,</span> <span class="n">est_v</span><span class="p">,</span> <span class="n">ref_c</span><span class="p">,</span> <span class="n">est_c</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">melody</span><span class="o">.</span><span class="n">to_cent_voicing</span><span class="p">(</span><span class="n">ref_time</span><span class="p">,</span> <span class="n">ref_freq</span><span class="p">,</span>
<span class="go">                                                                 est_time, est_freq)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">raw_chroma</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">melody</span><span class="o">.</span><span class="n">raw_chroma_accuracy</span><span class="p">(</span><span class="n">ref_v</span><span class="p">,</span> <span class="n">est_v</span><span class="p">,</span> <span class="n">ref_c</span><span class="p">,</span> <span class="n">est_c</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>ref_voicing <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Reference boolean voicing array</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>est_voicing <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Estimated boolean voicing array</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>ref_cent <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Reference pitch sequence in cents</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>est_cent <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Estimate pitch sequence in cents</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>raw_chroma <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Raw chroma accuracy, the fraction of voiced frames in ref_cent for which est_cent
provides a correct frequency values (within 50 cents), ignoring octave errors</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.melody.overall_accuracy">
<tt class="descclassname">mir_eval.melody.</tt><tt class="descname">overall_accuracy</tt><big>(</big><em>ref_voicing</em>, <em>est_voicing</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.melody.overall_accuracy" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the overall accuracy given two pitch (frequency) sequences in cents
and matching voicing indicator sequences. The first pitch and voicing arrays
are treated as the reference (truth), and the second two as the estimate (prediction).
All 4 sequences must be of the same length.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_time</span><span class="p">,</span> <span class="n">ref_freq</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_time_series</span><span class="p">(</span><span class="n">reference_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_time</span><span class="p">,</span> <span class="n">est_freq</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_time_series</span><span class="p">(</span><span class="n">estimated_file</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ref_v</span><span class="p">,</span> <span class="n">est_v</span><span class="p">,</span> <span class="n">ref_c</span><span class="p">,</span> <span class="n">est_c</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">melody</span><span class="o">.</span><span class="n">to_cent_voicing</span><span class="p">(</span><span class="n">ref_time</span><span class="p">,</span> <span class="n">ref_freq</span><span class="p">,</span>
<span class="go">                                                                 est_time, est_freq)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">overall_accuracy</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">melody</span><span class="o">.</span><span class="n">overall_accuracy</span><span class="p">(</span><span class="n">ref_v</span><span class="p">,</span> <span class="n">est_v</span><span class="p">,</span> <span class="n">ref_c</span><span class="p">,</span> <span class="n">est_c</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>ref_voicing <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Reference boolean voicing array</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>est_voicing <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Estimated boolean voicing array</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>ref_cent <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Reference pitch sequence in cents</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>est_cent <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">Estimate pitch sequence in cents</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>overall_accuracy <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Overall accuracy, the total fraction of correctly estimates frames, where
provides a correct frequency values (within 50 cents).</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-mir_eval.onset">
<span id="mir-eval-onset"></span><h2>mir_eval.onset<a class="headerlink" href="#module-mir_eval.onset" title="Permalink to this headline">¶</a></h2>
<p>Basic metrics for evaluating onset detection systems.
Based in part on this script:</p>
<blockquote>
<div><a class="reference external" href="https://github.com/CPJKU/onset_detection/blob/master/onset_evaluation.py">https://github.com/CPJKU/onset_detection/blob/master/onset_evaluation.py</a></div></blockquote>
<dl class="function">
<dt id="mir_eval.onset.validate">
<tt class="descclassname">mir_eval.onset.</tt><tt class="descname">validate</tt><big>(</big><em>metric</em><big>)</big><a class="headerlink" href="#mir_eval.onset.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator which checks that the input annotations to a metric
look like valid onset time arrays, and throws helpful errors if not.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>metric <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">Evaluation metric function.  First two arguments must be
reference_onsets and estimated_onsets.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>metric_validated <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">The function with the onset locations validated</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.onset.f_measure">
<tt class="descclassname">mir_eval.onset.</tt><tt class="descname">f_measure</tt><big>(</big><em>reference_onsets</em>, <em>estimated_onsets</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.onset.f_measure" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the F-measure of correct vs incorrectly predicted onsets.
&#8220;Corectness&#8221; is determined over a small window.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">reference_onsets</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_events</span><span class="p">(</span><span class="s">&#39;reference.txt&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">estimated_onsets</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_events</span><span class="p">(</span><span class="s">&#39;estimated.txt&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f_measure</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">onset</span><span class="o">.</span><span class="n">f_measure</span><span class="p">(</span><span class="n">reference_beats</span><span class="p">,</span> <span class="n">estimated_beats</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_onsets <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">reference onset locations, in seconds</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_onsets <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">estimated onset locations, in seconds</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>window <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Window size, in seconds, default 0.05</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>f_measure <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">2*precision*recall/(precision + recall)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>precision <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">(# true positives)/(# true positives + # false positives)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>recall <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">(# true positives)/(# true positives + # false negatives)</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-mir_eval.pattern">
<span id="mir-eval-pattern"></span><h2>mir_eval.pattern<a class="headerlink" href="#module-mir_eval.pattern" title="Permalink to this headline">¶</a></h2>
<p>Functions for evaluating the task of pattern discovery.</p>
<div class="section" id="input-format">
<h3>Input Format<a class="headerlink" href="#input-format" title="Permalink to this headline">¶</a></h3>
<p>The input format can be automatically generated by calling the function
load_patterns from the input_output module using a text file with the MIREX
form at as input. Here is a description of the input format:</p>
<dl class="docutils">
<dt>List of list of tuples:</dt>
<dd>Patterns: First level list
Occurrences: Second level list
Onset_Midi: Tuple of (onset_time, mid_note)</dd>
</dl>
<p>A pattern is a list of occurrences. The first occurrence must be the prototype
of that pattern (i.e. the most representative of all the occurrences).</p>
<p>An occurrence is a list of tuples containing the onset time and the midi
note number.</p>
</div>
<div class="section" id="metrics-implemented">
<h3>Metrics implemented<a class="headerlink" href="#metrics-implemented" title="Permalink to this headline">¶</a></h3>
<div class="section" id="standard-precision-recall-and-f1-score">
<h4>Standard Precision, Recall and F1 Score<a class="headerlink" href="#standard-precision-recall-and-f1-score" title="Permalink to this headline">¶</a></h4>
<p>Strict metric in order to find the possibly transposed patterns of exact
length. This is the only metric that considers transposed patterns.
Used and described here:</p>
<p>Tom Collins, Jeremy Thurlow, Robin Laney, Alistair Willis, and Paul H.
Garthwaite. A comparative evaluation of algorithms for discovering
translational patterns in Baroque keyboard works. In J.S. Downie and R.
Veltkamp (Eds), Proc ISMIR, pp. 3-8, Utrecht, 2010.</p>
</div>
<div class="section" id="establishment-precision-recall-and-f1-score">
<h4>Establishment Precision, Recall and F1 Score<a class="headerlink" href="#establishment-precision-recall-and-f1-score" title="Permalink to this headline">¶</a></h4>
<p>This metric evaluates the amount of patterns that were successfully identified
by the estimated results, no matter how many occurrences they found.
In other words, this metric captures how the algorithm successfully
_established_ that a pattern repeated at least twice, and this pattern is also
found in the reference annotation.</p>
</div>
<div class="section" id="occurrence-precision-recall-and-f1-score">
<h4>Occurrence Precision, Recall and F1 Score<a class="headerlink" href="#occurrence-precision-recall-and-f1-score" title="Permalink to this headline">¶</a></h4>
<p>Evaluation of how well an estimation can effectively identify all the
occurrences of the found patterns, independently of how many patterns have
been discovered. This metric has a threshold parameter that indicates how
similar two occurrences must be in order to be considered equal.</p>
<p>In MIREX, this evaluation is run twice, with thresholds .75 and .5.</p>
</div>
<div class="section" id="three-layer-precision-recall-and-f1-score">
<h4>Three-layer Precision, Recall and F1 Score<a class="headerlink" href="#three-layer-precision-recall-and-f1-score" title="Permalink to this headline">¶</a></h4>
<p>This metric aims to evaluate the general similarity between the reference and
the estimations, combining both the establishment of patterns and the
retrieval of its occurrences in a single F1 score.</p>
<p>Proposed by David Meridith in personal correspondance with Tom Collins in 2013,
and formally described in:</p>
<p>Tom Collins 2014 (TODO).</p>
</div>
<div class="section" id="first-n-patterns-metrics">
<h4>First N patterns metrics<a class="headerlink" href="#first-n-patterns-metrics" title="Permalink to this headline">¶</a></h4>
<p>This includes the first N patterns target proportion establishment recall,
and the first N patterns three-layer precision. By analyzing the first N
patterns only, we evaluate the ability of the algorithm of sorting the
identified patterns based on their relevance. Both metrics are used in the
MIREX evaluation.</p>
<p>Written by Oriol Nieto (<a class="reference external" href="mailto:oriol&#37;&#52;&#48;nyu&#46;edu">oriol<span>&#64;</span>nyu<span>&#46;</span>edu</a>), 2014</p>
<dl class="function">
<dt id="mir_eval.pattern.validate">
<tt class="descclassname">mir_eval.pattern.</tt><tt class="descname">validate</tt><big>(</big><em>metric</em><big>)</big><a class="headerlink" href="#mir_eval.pattern.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator which checks that the input annotations to a metric
look like valid pattern lists, and throws helpful errors if not.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>metric <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">Evaluation metric function.  First two arguments must be
reference_patterns and estimated_patterns.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>metric_validated <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">The function with the pattern lists validated.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.pattern.standard_FPR">
<tt class="descclassname">mir_eval.pattern.</tt><tt class="descname">standard_FPR</tt><big>(</big><em>reference_patterns</em>, <em>estimated_patterns</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.pattern.standard_FPR" title="Permalink to this definition">¶</a></dt>
<dd><p>Standard F1 Score, Precision and Recall.</p>
<p>This metric checks if the prorotype patterns of the reference match
possible translated patterns in the prototype patterns of the estimations.
Since the sizes of these prototypes must be equal, this metric is quite
restictive and it tends to be 0 in most of 2013 MIREX results.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_patterns</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">load_patterns</span><span class="p">(</span><span class="s">&quot;ref_pattern.txt&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_patterns</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">load_patterns</span><span class="p">(</span><span class="s">&quot;est_pattern.txt&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">F</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">R</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">standard_FPR</span><span class="p">(</span><span class="n">ref_patterns</span><span class="p">,</span> <span class="n">est_patterns</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>reference_patterns</strong> (<em>list</em>) &#8211; The reference patterns using the same format as
the one load_patterns in the input_output module returns.</li>
<li><strong>estimated_patterns</strong> (<em>list</em>) &#8211; The estimated patterns using the same format as
the one load_patterns in the input_output module returns.</li>
<li><strong>tol</strong> (<em>float</em>) &#8211; Tolerance level when comparing reference against estimation.
Default parameter is the one found in the original matlab code by
Tom Collins used for MIREX 2013.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>f_measure <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The standard F1 Score</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>precision <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The standard Precision</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>recall <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The standard Recall</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.pattern.establishment_FPR">
<tt class="descclassname">mir_eval.pattern.</tt><tt class="descname">establishment_FPR</tt><big>(</big><em>reference_patterns</em>, <em>estimated_patterns</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.pattern.establishment_FPR" title="Permalink to this definition">¶</a></dt>
<dd><p>Establishment F1 Score, Precision and Recall.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_patterns</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">load_patterns</span><span class="p">(</span><span class="s">&quot;ref_pattern.txt&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_patterns</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">load_patterns</span><span class="p">(</span><span class="s">&quot;est_pattern.txt&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">F</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">R</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">establishment_FPR</span><span class="p">(</span><span class="n">ref_patterns</span><span class="p">,</span>
<span class="go">                                                 est_patterns)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>reference_patterns</strong> (<em>list</em>) &#8211; The reference patterns using the same format as
the one load_patterns in the input_output module returns.</li>
<li><strong>estimated_patterns</strong> (<em>list</em>) &#8211; The estimated patterns using the same format as
the one load_patterns in the input_output module returns.</li>
<li><strong>similarity_metric</strong> (<em>str</em>) &#8211; <p>A string representing the metric to be used
when computing the similarity matrix. Accepted values:</p>
<blockquote>
<div><dl class="docutils">
<dt>&#8220;cardinality_score&#8221;: </dt>
<dd>Count of the intersection between occurrences.</dd>
</dl>
</div></blockquote>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>f_measure <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The establishment F1 Score</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>precision <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The establishment Precision</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>recall <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The establishment Recall</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.pattern.occurrence_FPR">
<tt class="descclassname">mir_eval.pattern.</tt><tt class="descname">occurrence_FPR</tt><big>(</big><em>reference_patterns</em>, <em>estimated_patterns</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.pattern.occurrence_FPR" title="Permalink to this definition">¶</a></dt>
<dd><p>Establishment F1 Score, Precision and Recall.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_patterns</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">load_patterns</span><span class="p">(</span><span class="s">&quot;ref_pattern.txt&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_patterns</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">load_patterns</span><span class="p">(</span><span class="s">&quot;est_pattern.txt&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">F</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">R</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">occurrence_FPR</span><span class="p">(</span><span class="n">ref_patterns</span><span class="p">,</span>
<span class="go">                                              est_patterns)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>reference_patterns</strong> (<em>list</em>) &#8211; The reference patterns using the same format as
the one load_patterns in the input_output module returns.</li>
<li><strong>estimated_patterns</strong> (<em>list</em>) &#8211; The estimated patterns using the same format as
the one load_patterns in the input_output module returns.</li>
<li><strong>thres</strong> (<em>float</em>) &#8211; How much similar two occcurrences must be in order to be
considered equal.</li>
<li><strong>similarity_metric</strong> (<em>str</em>) &#8211; <p>A string representing the metric to be used
when computing the similarity matrix. Accepted values:</p>
<blockquote>
<div><dl class="docutils">
<dt>&#8220;cardinality_score&#8221;: </dt>
<dd>Count of the intersection between occurrences.</dd>
</dl>
</div></blockquote>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>f_measure <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The establishment F1 Score</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>precision <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The establishment Precision</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>recall <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The establishment Recall</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.pattern.three_layer_FPR">
<tt class="descclassname">mir_eval.pattern.</tt><tt class="descname">three_layer_FPR</tt><big>(</big><em>reference_patterns</em>, <em>estimated_patterns</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.pattern.three_layer_FPR" title="Permalink to this definition">¶</a></dt>
<dd><p>Three Layer F1 Score, Precision and Recall. As described by Meridith.</p>
<p>TODO: Add publication. Collins 2014?</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_patterns</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">load_patterns</span><span class="p">(</span><span class="s">&quot;ref_pattern.txt&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_patterns</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">load_patterns</span><span class="p">(</span><span class="s">&quot;est_pattern.txt&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">F</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">R</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">three_layer_FPR</span><span class="p">(</span><span class="n">ref_patterns</span><span class="p">,</span>
<span class="go">                                               est_patterns)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>reference_patterns</strong> (<em>list</em>) &#8211; The reference patterns using the same format as
the one load_patterns in the input_output module returns.</li>
<li><strong>estimated_patterns</strong> (<em>list</em>) &#8211; The estimated patterns using the same format as
the one load_patterns in the input_output module returns.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>f_measure <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The three-layer F1 Score</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>precision <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The three-layer Precision</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>recall <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The three-layer Recall</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.pattern.first_n_three_layer_P">
<tt class="descclassname">mir_eval.pattern.</tt><tt class="descname">first_n_three_layer_P</tt><big>(</big><em>reference_patterns</em>, <em>estimated_patterns</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.pattern.first_n_three_layer_P" title="Permalink to this definition">¶</a></dt>
<dd><p>First n three-layer precision.</p>
<p>This metric is basically the same as the three-layer FPR but it is only
applied to the first n estimated patterns, and it only returns the
precision. In MIREX and typically, n = 5.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_patterns</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">load_patterns</span><span class="p">(</span><span class="s">&quot;ref_pattern.txt&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_patterns</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">load_patterns</span><span class="p">(</span><span class="s">&quot;est_pattern.txt&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">P</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">first_n_three_layer_P</span><span class="p">(</span><span class="n">ref_patterns</span><span class="p">,</span>
<span class="go">                                               est_patterns, n=5)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>reference_patterns</strong> (<em>list</em>) &#8211; The reference patterns using the same format as
the one load_patterns in the input_output module returns.</li>
<li><strong>estimated_patterns</strong> (<em>list</em>) &#8211; The estimated patterns using the same format as
the one load_patterns in the input_output module returns.</li>
<li><strong>n</strong> (<em>int</em>) &#8211; Number of patterns to consider from the estimated results, in
the order they appear in the matrix.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>precision <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The first n three-layer Precision</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.pattern.first_n_target_proportion_R">
<tt class="descclassname">mir_eval.pattern.</tt><tt class="descname">first_n_target_proportion_R</tt><big>(</big><em>reference_patterns</em>, <em>estimated_patterns</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.pattern.first_n_target_proportion_R" title="Permalink to this definition">¶</a></dt>
<dd><p>Firt n target proportion establishment recall metric.</p>
<p>This metric is similar is similar to the establishment FPR score, but it
only takes into account the first n estimated patterns and it only
outputs the Recall value of it.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_patterns</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">load_patterns</span><span class="p">(</span><span class="s">&quot;ref_pattern.txt&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_patterns</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">load_patterns</span><span class="p">(</span><span class="s">&quot;est_pattern.txt&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">R</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">first_n_target_proportion_R</span><span class="p">(</span>
<span class="go">                                    ref_patterns, est_patterns, n=5)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>reference_patterns</strong> (<em>list</em>) &#8211; The reference patterns using the same format as
the one load_patterns in the input_output module returns.</li>
<li><strong>estimated_patterns</strong> (<em>list</em>) &#8211; The estimated patterns using the same format as
the one load_patterns in the input_output module returns.</li>
<li><strong>n</strong> (<em>int</em>) &#8211; Number of patterns to consider from the estimated results, in
the order they appear in the matrix.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>recall <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The first n target proportion Recall.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="module-mir_eval.separation">
<span id="mir-eval-separation"></span><h2>mir_eval.separation<a class="headerlink" href="#module-mir_eval.separation" title="Permalink to this headline">¶</a></h2>
<p>CREATED: 2013-08-13 12:31:25 by Dawen Liang &lt;<a class="reference external" href="mailto:dliang&#37;&#52;&#48;ee&#46;columbia&#46;edu">dliang<span>&#64;</span>ee<span>&#46;</span>columbia<span>&#46;</span>edu</a>&gt;</p>
<dl class="docutils">
<dt>Source separation evaluation:</dt>
<dd><dl class="first last docutils">
<dt>BSS-EVAL &#8211; SDR (Source-to-Distortion Ratio), SIR (Source-to-Interferences</dt>
<dd>Ratio), and SAR (Source-to-Artifacts Ratio)</dd>
</dl>
</dd>
</dl>
<dl class="function">
<dt id="mir_eval.separation.validate">
<tt class="descclassname">mir_eval.separation.</tt><tt class="descname">validate</tt><big>(</big><em>metric</em><big>)</big><a class="headerlink" href="#mir_eval.separation.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator which checks that the input data to a metric
are valid, and throws helpful errors if not.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>metric <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">Evaluation metric function.  First two arguments must be
reference_sources and estimated_sources.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>metric_validated <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">The function with the onset locations validated</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.separation.bss_eval_sources">
<tt class="descclassname">mir_eval.separation.</tt><tt class="descname">bss_eval_sources</tt><big>(</big><em>reference_sources</em>, <em>estimated_sources</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.separation.bss_eval_sources" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>BSS_EVAL_SOURCES</dt>
<dd><p class="first">MATLAB translation of BSS_EVAL Toolbox</p>
<p>Ordering and measurement of the separation quality for estimated source
signals in terms of filtered true source, interference and artifacts.</p>
<p class="last">The decomposition allows a time-invariant filter distortion of length
512, as described in Section III.B of the reference below.</p>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># reference_sources[n] should be an ndarray of samples of the n&#39;th reference source</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># estimated_sources[n] should be the same for the n&#39;th estimated source</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sdr</span><span class="p">,</span> <span class="n">sir</span><span class="p">,</span> <span class="n">sar</span><span class="p">,</span> <span class="n">perm</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">separation</span><span class="o">.</span><span class="n">bss_eval_sources</span><span class="p">(</span><span class="n">reference_sources</span><span class="p">,</span>
<span class="go">                                                               estimated_sources)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_sources: ndarray</dt>
<dd><p class="first last">(nsrc, nsampl) matrix containing true sources</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_sources: ndarray</dt>
<dd><p class="first last">(nsrc, nsampl) matrix containing estimated sources</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>sdr: ndarray</dt>
<dd><p class="first last">(nsrc, ) vector of Signal to Distortion Ratios (SDR)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sir: ndarray</dt>
<dd><p class="first last">(nsrc, ) vector of Source to Interference Ratios (SIR)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sar: ndarray</dt>
<dd><p class="first last">(nsrc, ) vector of Sources to Artifacts Ratios (SAR)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>perm: ndarray</dt>
<dd><p class="first last">(nsrc, ) vector containing the best ordering of estimated sources in
the mean SIR sense (estimated source number perm[j] corresponds to
true source number j)</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Reference:</dt>
<dd>Emmanuel Vincent, Rémi Gribonval, and Cédric Févotte, &#8220;Performance
measurement in blind audio source separation,&#8221; IEEE Trans. on Audio,
Speech and Language Processing, 14(4):1462-1469, 2006.</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-mir_eval.sonify">
<span id="mir-eval-sonify"></span><h2>mir_eval.sonify<a class="headerlink" href="#module-mir_eval.sonify" title="Permalink to this headline">¶</a></h2>
<p>Methods which sonify annotations for &#8220;evaluation by ear&#8221;.
All functions return a raw signal at the specified sampling rate.</p>
<dl class="function">
<dt id="mir_eval.sonify.clicks">
<tt class="descclassname">mir_eval.sonify.</tt><tt class="descname">clicks</tt><big>(</big><em>times</em>, <em>fs</em>, <em>click=None</em>, <em>length=None</em><big>)</big><a class="headerlink" href="#mir_eval.sonify.clicks" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a signal with the signal &#8216;click&#8217; placed at each specified time</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Inputs:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>times: np.ndarray</dt>
<dd><p class="first last">times to place clicks, in seconds</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>fs: int</dt>
<dd><p class="first last">desired sampling rate of the output signal</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>click: np.array</dt>
<dd><p class="first last">click signal, defaults to an 1 kHz blip</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>length: int</dt>
<dd><p class="first last">desired number of samples in the output signal,
defaults to times.max()*fs + click.shape[0] + 1</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Outputs:</th><td class="field-body"><ul class="first last">
<li><dl class="first docutils">
<dt>click_signal: np.array</dt>
<dd><p class="first last">Synthesized click signal</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.sonify.time_frequency">
<tt class="descclassname">mir_eval.sonify.</tt><tt class="descname">time_frequency</tt><big>(</big><em>gram</em>, <em>frequencies</em>, <em>times</em>, <em>fs</em>, <em>function=&lt;ufunc 'sin'&gt;</em>, <em>length=None</em><big>)</big><a class="headerlink" href="#mir_eval.sonify.time_frequency" title="Permalink to this definition">¶</a></dt>
<dd><p>Reverse synthesis of a time-frequency representation of a signal</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Inputs:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>gram: np.ndarray </dt>
<dd><p class="first last">gram[n, m] is the magnitude of frequencies[n]
from times[n] to times[n + 1]</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>frequencies: np.ndarray </dt>
<dd><p class="first last">array of size gram.shape[0] denoting the frequency of
each row of gram</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>times: np.ndarray </dt>
<dd><p class="first last">array of size gram.shape[1] denoting the start time of each
column of gram</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>fs: int </dt>
<dd><p class="first last">desired sampling rate of the output signal</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>function: function</dt>
<dd><p class="first last">function to use to synthesize notes, should be 2pi-periodic</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>length: int </dt>
<dd><p class="first last">desired number of samples in the output signal,
defaults to times[-1]*fs</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Outputs:</th><td class="field-body"><ul class="first last">
<li><dl class="first docutils">
<dt>output: np.array </dt>
<dd><p class="first last">synthetized version of the piano roll</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-mir_eval.structure">
<span id="mir-eval-structure"></span><h2>mir_eval.structure<a class="headerlink" href="#module-mir_eval.structure" title="Permalink to this headline">¶</a></h2>
<p>Structural segmentation evaluation, following the protocols of MIREX2012.</p>
<dl class="docutils">
<dt>Frame clustering metrics:</dt>
<dd><ul class="first last simple">
<li>pairwise classification</li>
<li>adjusted rand index</li>
<li>mutual information</li>
<li>normalized conditional entropy</li>
</ul>
</dd>
</dl>
<dl class="function">
<dt id="mir_eval.structure.validate">
<tt class="descclassname">mir_eval.structure.</tt><tt class="descname">validate</tt><big>(</big><em>metric</em><big>)</big><a class="headerlink" href="#mir_eval.structure.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator which checks that the input annotations to a metric
look like valid segment times, and throws helpful errors if not.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>metric <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">Evaluation metric function.  First four arguments must be
reference_annotations, reference_labels,
estimated_annotations, and estimated_labels.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>metric_validated <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">The function with the segment intervals are validated</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.structure.pairwise">
<tt class="descclassname">mir_eval.structure.</tt><tt class="descname">pairwise</tt><big>(</big><em>reference_intervals</em>, <em>reference_labels</em>, <em>estimated_intervals</em>, <em>estimated_labels</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.structure.pairwise" title="Permalink to this definition">¶</a></dt>
<dd><p>Frame-clustering segmentation evaluation by pair-wise agreement.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;reference.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;estimate.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Trim or pad the estimate to match reference timing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">adjust_intervals</span><span class="p">(</span><span class="n">ref_intervals</span><span class="p">,</span>
<span class="go">                                                               ref_labels,</span>
<span class="go">                                                               t_min=0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">adjust_intervals</span><span class="p">(</span><span class="n">est_intervals</span><span class="p">,</span>
<span class="go">                                                               est_labels,</span>
<span class="go">                                                               t_min=0,</span>
<span class="go">                                                               t_max=ref_intervals.max())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">precision</span><span class="p">,</span> <span class="n">recall</span><span class="p">,</span> <span class="n">f</span>   <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">pairwise</span><span class="p">(</span><span class="n">ref_intervals</span><span class="p">,</span>
<span class="go">                                                         ref_labels,</span>
<span class="go">                                                         est_intervals,</span>
<span class="go">                                                         est_labels)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n, 2)</span></dt>
<dd><p class="first last">reference segment intervals, as returned by <cite>mir_eval.io.load_intervals</cite></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>reference_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, shape=(n,)</span></dt>
<dd><p class="first last">reference segment labels, as returned by <cite>mir_eval.io.load_intervals</cite></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(m, 2)</span></dt>
<dd><p class="first last">estimated segment intervals, as returned by <cite>mir_eval.io.load_intervals</cite></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, shape=(m,)</span></dt>
<dd><p class="first last">estimated segment labels, as returned by <cite>mir_eval.io.load_intervals</cite></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>frame_size <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">length (in seconds) of frames for clustering</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>beta <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">beta value for F-measure</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><ul>
<li><p class="first">Pair_precision : float &gt; 0</p>
</li>
<li><p class="first">Pair_recall   : float &gt; 0</p>
</li>
<li><dl class="first docutils">
<dt>Pair_F <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">Precision/recall/f-measure of detecting whether
frames belong in the same cluster</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last">
<li><dl class="first docutils">
<dt>ValueError</dt>
<dd><p class="first last">If <tt class="docutils literal"><span class="pre">reference_intervals</span></tt> and <tt class="docutils literal"><span class="pre">estimated_intervals</span></tt> do not span the
same time duration.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">mir_eval.util.adjust_intervals</p>
</div>
</dd></dl>

<dl class="function">
<dt id="mir_eval.structure.rand_index">
<tt class="descclassname">mir_eval.structure.</tt><tt class="descname">rand_index</tt><big>(</big><em>reference_intervals</em>, <em>reference_labels</em>, <em>estimated_intervals</em>, <em>estimated_labels</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.structure.rand_index" title="Permalink to this definition">¶</a></dt>
<dd><p>(Non-adjusted) Rand index.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;reference.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;estimate.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Trim or pad the estimate to match reference timing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">adjust_intervals</span><span class="p">(</span><span class="n">ref_intervals</span><span class="p">,</span>
<span class="go">                                                               ref_labels,</span>
<span class="go">                                                               t_min=0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">adjust_intervals</span><span class="p">(</span><span class="n">est_intervals</span><span class="p">,</span>
<span class="go">                                                               est_labels,</span>
<span class="go">                                                               t_min=0,</span>
<span class="go">                                                               t_max=ref_intervals.max())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rand_index</span>   <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">rand_index</span><span class="p">(</span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span><span class="p">,</span>
<span class="go">                                                 est_intervals, est_labels)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n, 2)</span></dt>
<dd><p class="first last">reference segment intervals, as returned by <cite>mir_eval.io.load_intervals</cite></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>reference_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, shape=(n,)</span></dt>
<dd><p class="first last">reference segment labels, as returned by <cite>mir_eval.io.load_intervals</cite></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(m, 2)</span></dt>
<dd><p class="first last">estimated segment intervals, as returned by <cite>mir_eval.io.load_intervals</cite></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_labels <span class="classifier-delimiter">:</span> <span class="classifier">list, shape=(m,)</span></dt>
<dd><p class="first last">estimated segment labels, as returned by <cite>mir_eval.io.load_intervals</cite></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>frame_size <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">length (in seconds) of frames for clustering</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>beta <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">beta value for F-measure</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><ul>
<li><dl class="first docutils">
<dt>R <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">Rand index</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last">
<li><dl class="first docutils">
<dt>ValueError</dt>
<dd><p class="first last">If <tt class="docutils literal"><span class="pre">reference_intervals</span></tt> and <tt class="docutils literal"><span class="pre">estimated_intervals</span></tt> do not span the
same time duration.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">mir_eval.util.adjust_intervals</p>
</div>
</dd></dl>

<dl class="function">
<dt id="mir_eval.structure.ari">
<tt class="descclassname">mir_eval.structure.</tt><tt class="descname">ari</tt><big>(</big><em>reference_intervals</em>, <em>reference_labels</em>, <em>estimated_intervals</em>, <em>estimated_labels</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.structure.ari" title="Permalink to this definition">¶</a></dt>
<dd><p>Adjusted Rand Index (ARI) for frame clustering segmentation evaluation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;reference.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;estimate.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Trim or pad the estimate to match reference timing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">adjust_intervals</span><span class="p">(</span><span class="n">ref_intervals</span><span class="p">,</span>
<span class="go">                                                               ref_labels,</span>
<span class="go">                                                               t_min=0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">adjust_intervals</span><span class="p">(</span><span class="n">est_intervals</span><span class="p">,</span>
<span class="go">                                                               est_labels,</span>
<span class="go">                                                               t_min=0,</span>
<span class="go">                                                               t_max=ref_intervals.max())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ari_score</span>              <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">ari</span><span class="p">(</span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span><span class="p">,</span>
<span class="go">                                                    est_intervals, est_labels)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_intervals <span class="classifier-delimiter">:</span> <span class="classifier">list-like, float</span></dt>
<dd><p class="first last">ground-truth segment boundary times (in seconds)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_intervals <span class="classifier-delimiter">:</span> <span class="classifier">list-like, float</span></dt>
<dd><p class="first last">estimated segment boundary times (in seconds)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>frame_size <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">length (in seconds) of frames for clustering</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>ARI <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">Adjusted Rand index between segmentations.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is assumed that <tt class="docutils literal"><span class="pre">intervals[-1]</span></tt> == length of song</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Segment intervals will be rounded down to the nearest multiple
of frame_size.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="mir_eval.structure.mutual_information">
<tt class="descclassname">mir_eval.structure.</tt><tt class="descname">mutual_information</tt><big>(</big><em>reference_intervals</em>, <em>reference_labels</em>, <em>estimated_intervals</em>, <em>estimated_labels</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.structure.mutual_information" title="Permalink to this definition">¶</a></dt>
<dd><p>Frame-clustering segmentation: mutual information metrics.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;reference.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;estimate.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Trim or pad the estimate to match reference timing</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">adjust_intervals</span><span class="p">(</span><span class="n">ref_intervals</span><span class="p">,</span>
<span class="go">                                                               ref_labels,</span>
<span class="go">                                                               t_min=0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">adjust_intervals</span><span class="p">(</span><span class="n">est_intervals</span><span class="p">,</span>
<span class="go">                                                               est_labels,</span>
<span class="go">                                                               t_min=0,</span>
<span class="go">                                                               t_max=ref_intervals.max())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mi</span><span class="p">,</span> <span class="n">ami</span><span class="p">,</span> <span class="n">nmi</span>           <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">mutual_information</span><span class="p">(</span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span><span class="p">,</span>
<span class="go">                                                                   est_intervals, est_labels)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_intervals <span class="classifier-delimiter">:</span> <span class="classifier">list-like, float</span></dt>
<dd><p class="first last">ground-truth segment boundary times (in seconds)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_intervals <span class="classifier-delimiter">:</span> <span class="classifier">list-like, float</span></dt>
<dd><p class="first last">estimated segment boundary times (in seconds)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>frame_size <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">length (in seconds) of frames for clustering</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>MI <span class="classifier-delimiter">:</span> <span class="classifier">float &gt;0</span></dt>
<dd><p class="first last">Mutual information between segmentations</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>AMI <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Adjusted mutual information between segmentations.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>NMI <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">Normalize mutual information between segmentations</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is assumed that <cite>intervals[-1] == length of song</cite></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Segment intervals will be rounded down to the nearest multiple
of frame_size.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="mir_eval.structure.nce">
<tt class="descclassname">mir_eval.structure.</tt><tt class="descname">nce</tt><big>(</big><em>reference_intervals</em>, <em>reference_labels</em>, <em>estimated_intervals</em>, <em>estimated_labels</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#mir_eval.structure.nce" title="Permalink to this definition">¶</a></dt>
<dd><p>Frame-clustering segmentation: normalized conditional entropy</p>
<p>Computes cross-entropy of cluster assignment, normalized by the max-entropy.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage:</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;reference.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_intervals</span><span class="p">(</span><span class="s">&#39;estimate.lab&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">adjust_intervals</span><span class="p">(</span><span class="n">ref_intervals</span><span class="p">,</span>
<span class="go">                                                               ref_labels,</span>
<span class="go">                                                               t_min=0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">est_intervals</span><span class="p">,</span> <span class="n">est_labels</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">adjust_intervals</span><span class="p">(</span><span class="n">est_intervals</span><span class="p">,</span>
<span class="go">                                                               est_labels,</span>
<span class="go">                                                               t_min=0,</span>
<span class="go">                                                               t_max=ref_intervals.max())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S_over</span><span class="p">,</span> <span class="n">S_under</span><span class="p">,</span> <span class="n">S_F</span>     <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">structure</span><span class="o">.</span><span class="n">nce</span><span class="p">(</span><span class="n">ref_intervals</span><span class="p">,</span> <span class="n">ref_labels</span><span class="p">,</span>
<span class="go">                                                      est_intervals, est_labels)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>reference_intervals <span class="classifier-delimiter">:</span> <span class="classifier">list-like, float</span></dt>
<dd><p class="first last">ground-truth segment boundary times (in seconds)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>estimated_intervals <span class="classifier-delimiter">:</span> <span class="classifier">list-like, float</span></dt>
<dd><p class="first last">estimated segment boundary times (in seconds)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>frame_size <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">length (in seconds) of frames for clustering</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>beta <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">beta for F-measure</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>S_over</dt>
<dd><p class="first last">Over-clustering score:
<tt class="docutils literal"><span class="pre">1</span> <span class="pre">-</span> <span class="pre">H(y_est</span> <span class="pre">|</span> <span class="pre">y_ref)</span> <span class="pre">/</span> <span class="pre">log(|y_est|)</span></tt>
If <cite>|y_est|==1</cite>, then <cite>S_over</cite> will be 0.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>S_under</dt>
<dd><p class="first last">Under-clustering score:
<tt class="docutils literal"><span class="pre">1</span> <span class="pre">-</span> <span class="pre">H(y_ref</span> <span class="pre">|</span> <span class="pre">y_est)</span> <span class="pre">/</span> <span class="pre">log(|y_ref|)</span></tt>
If <cite>|y_ref|==1</cite>, then <cite>S_under</cite> will be 0.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>S_F</dt>
<dd><p class="first last">F-measure for (S_over, S_under)</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Towards quantitative measures of evaluating song segmentation.
Lukashevich, H. ISMIR 2008.</p>
</div>
</dd></dl>

</div>
<div class="section" id="module-mir_eval.util">
<span id="mir-eval-util"></span><h2>mir_eval.util<a class="headerlink" href="#module-mir_eval.util" title="Permalink to this headline">¶</a></h2>
<p>Utility sub-module for mir-eval</p>
<dl class="function">
<dt id="mir_eval.util.index_labels">
<tt class="descclassname">mir_eval.util.</tt><tt class="descname">index_labels</tt><big>(</big><em>labels</em>, <em>case_sensitive=False</em><big>)</big><a class="headerlink" href="#mir_eval.util.index_labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a list of string identifiers into numerical indices.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li>labels : list of strings, shape=(n,)
A list of annotations, e.g., segment or chord labels from an annotation file.</li>
<li>case_sensitive : bool
Set to <cite>True</cite> to enable case-sensitive label indexing</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li>indices : list, shape=(n,)
Numerical representation of <cite>labels</cite></li>
<li>index_to_label : dict
Mapping to convert numerical indices back to labels.
<cite>labels[i] == index_to_label[indices[i]]`</cite></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.util.intervals_to_samples">
<tt class="descclassname">mir_eval.util.</tt><tt class="descname">intervals_to_samples</tt><big>(</big><em>intervals</em>, <em>labels</em>, <em>offset=0</em>, <em>sample_size=0.1</em>, <em>fill_value=None</em><big>)</big><a class="headerlink" href="#mir_eval.util.intervals_to_samples" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an array of labeled time intervals to annotated samples.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n, d)</span></dt>
<dd><p class="first last">An array of time intervals, as returned by
<tt class="docutils literal"><span class="pre">mir_eval.io.load_intervals</span></tt>.
The <cite>i`th interval spans time ``intervals[i, 0]`</cite> to
<tt class="docutils literal"><span class="pre">intervals[i,</span> <span class="pre">1]</span></tt>.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>labels <span class="classifier-delimiter">:</span> <span class="classifier">list, shape=(n,)</span></dt>
<dd><p class="first last">The annotation for each interval</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>offset <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">Phase offset of the sampled time grid (in seconds)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sample_size <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">duration of each sample to be generated (in seconds)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>fill_value <span class="classifier-delimiter">:</span> <span class="classifier">type(labels[0])</span></dt>
<dd><p class="first last">Object to use for the label with out-of-range time points.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>sample_times <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">list of sample times</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sample_labels <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">array of segment labels for each generated sample</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>..note::</dt>
<dd>Segment intervals will be rounded down to the nearest multiple
of <tt class="docutils literal"><span class="pre">frame_size</span></tt>.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="mir_eval.util.interpolate_intervals">
<tt class="descclassname">mir_eval.util.</tt><tt class="descname">interpolate_intervals</tt><big>(</big><em>intervals</em>, <em>labels</em>, <em>time_points</em>, <em>fill_value=None</em><big>)</big><a class="headerlink" href="#mir_eval.util.interpolate_intervals" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign labels to a set of points in time given a set of intervals.</p>
<p>Note: Times outside of the known boundaries are mapped to None by default.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n, d)</span></dt>
<dd><p class="first last">An array of time intervals, as returned by
<tt class="docutils literal"><span class="pre">mir_eval.io.load_intervals</span></tt>.
The <cite>i`th interval spans time ``intervals[i, 0]`</cite> to
<tt class="docutils literal"><span class="pre">intervals[i,</span> <span class="pre">1]</span></tt>.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>labels <span class="classifier-delimiter">:</span> <span class="classifier">list, shape=(n,)</span></dt>
<dd><p class="first last">The annotation for each interval</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>time_points <span class="classifier-delimiter">:</span> <span class="classifier">array_like, shape=(m,)</span></dt>
<dd><p class="first last">Points in time to assign labels.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>aligned_labels <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">Labels corresponding to the given time points.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.util.f_measure">
<tt class="descclassname">mir_eval.util.</tt><tt class="descname">f_measure</tt><big>(</big><em>precision</em>, <em>recall</em>, <em>beta=1.0</em><big>)</big><a class="headerlink" href="#mir_eval.util.f_measure" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the f-measure from precision and recall scores.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>precision <span class="classifier-delimiter">:</span> <span class="classifier">float in (0, 1]</span></dt>
<dd><p class="first last">Precision</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>recall <span class="classifier-delimiter">:</span> <span class="classifier">float in (0, 1]</span></dt>
<dd><p class="first last">Recall</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>beta <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">Weighting factor for f-measure</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>f_measure <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">The weighted f-measure</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.util.intervals_to_boundaries">
<tt class="descclassname">mir_eval.util.</tt><tt class="descname">intervals_to_boundaries</tt><big>(</big><em>intervals</em><big>)</big><a class="headerlink" href="#mir_eval.util.intervals_to_boundaries" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert segment interval times into boundaries.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n_events, 2)</span></dt>
<dd><p class="first last">Array of segment start and end-times</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>boundaries <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">Segment boundary times, including the end of the final segment</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.util.boundaries_to_intervals">
<tt class="descclassname">mir_eval.util.</tt><tt class="descname">boundaries_to_intervals</tt><big>(</big><em>boundaries</em>, <em>labels=None</em><big>)</big><a class="headerlink" href="#mir_eval.util.boundaries_to_intervals" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an array of event times into intervals</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>boundaries <span class="classifier-delimiter">:</span> <span class="classifier">list-like</span></dt>
<dd><p class="first last">List-like of event times.  These are assumed to be unique timestamps in ascending order.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>labels <span class="classifier-delimiter">:</span> <span class="classifier">None or list of str</span></dt>
<dd><p class="first last">Optional list of strings describing each event</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><ul>
<li><dl class="first docutils">
<dt>segments <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n_segments, 2)</span></dt>
<dd><p class="first last">Start and end time for each segment</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>labels <span class="classifier-delimiter">:</span> <span class="classifier">list of str or None</span></dt>
<dd><p class="first last">Labels for each event.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li>ValueError
If the input times are not unique and ascending</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.util.adjust_intervals">
<tt class="descclassname">mir_eval.util.</tt><tt class="descname">adjust_intervals</tt><big>(</big><em>intervals</em>, <em>labels=None</em>, <em>t_min=0.0</em>, <em>t_max=None</em>, <em>start_label='__T_MIN'</em>, <em>end_label='__T_MAX'</em><big>)</big><a class="headerlink" href="#mir_eval.util.adjust_intervals" title="Permalink to this definition">¶</a></dt>
<dd><p>Adjust a list of time intervals to span the range [t_min, t_max].</p>
<p>Any intervals lying completely outside the specified range will be removed.</p>
<p>Any intervals lying partially outside the specified range will be truncated.</p>
<p>If the specified range exceeds the span of the provided data in either direction,
additional intervals will be appended.  Any appended intervals at the start will
be given label <cite>start_label</cite>.  Any appended intervals at the end will be given
label <cite>end_label</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n_events, 2)</span></dt>
<dd><p class="first last">Array of segment start and end-times</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>labels <span class="classifier-delimiter">:</span> <span class="classifier">list, len=n_events or None</span></dt>
<dd><p class="first last">List of labels</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>t_min <span class="classifier-delimiter">:</span> <span class="classifier">float or None</span></dt>
<dd><p class="first last">Minimum interval start time.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>t_max <span class="classifier-delimiter">:</span> <span class="classifier">float or None</span></dt>
<dd><p class="first last">Maximum interval end time.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>start_label <span class="classifier-delimiter">:</span> <span class="classifier">str or float or int</span></dt>
<dd><p class="first last">Label to give any intervals appended at the beginning</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>end_label <span class="classifier-delimiter">:</span> <span class="classifier">str or float or int</span></dt>
<dd><p class="first last">Label to give any intervals appended at the end</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>new_intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.array</span></dt>
<dd><p class="first last">Intervals spanning [t_min, t_max]</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>new_labels <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of labels for new_labels</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.util.adjust_events">
<tt class="descclassname">mir_eval.util.</tt><tt class="descname">adjust_events</tt><big>(</big><em>events</em>, <em>labels=None</em>, <em>t_min=0.0</em>, <em>t_max=None</em>, <em>label_prefix='__'</em><big>)</big><a class="headerlink" href="#mir_eval.util.adjust_events" title="Permalink to this definition">¶</a></dt>
<dd><p>Adjust the given list of event times to span the range [t_min, t_max].</p>
<p>Any event times outside of the specified range will be removed.</p>
<p>If the times do not span [t_min, t_max], additional events will be added with
the prefix label_prefix.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>events <span class="classifier-delimiter">:</span> <span class="classifier">np.array</span></dt>
<dd><p class="first last">Array of event times (seconds)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>labels <span class="classifier-delimiter">:</span> <span class="classifier">list or None</span></dt>
<dd><p class="first last">List of labels</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>t_min <span class="classifier-delimiter">:</span> <span class="classifier">float or None</span></dt>
<dd><p class="first last">Minimum valid event time.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>t_max <span class="classifier-delimiter">:</span> <span class="classifier">float or None</span></dt>
<dd><p class="first last">Maximum valid event time.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>label_prefix <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">Prefix string to use for synthetic labels</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>new_times <span class="classifier-delimiter">:</span> <span class="classifier">np.array</span></dt>
<dd><p class="first last">Event times corrected to the given range.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.util.intersect_files">
<tt class="descclassname">mir_eval.util.</tt><tt class="descname">intersect_files</tt><big>(</big><em>flist1</em>, <em>flist2</em><big>)</big><a class="headerlink" href="#mir_eval.util.intersect_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the intersection of two sets of filepaths, based on the file name
(after the final &#8216;/&#8217;) and ignoring the file extension.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">flist1</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;/a/b/abc.lab&#39;</span><span class="p">,</span> <span class="s">&#39;/c/d/123.lab&#39;</span><span class="p">,</span> <span class="s">&#39;/e/f/xyz.lab&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flist2</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;/g/h/xyz.npy&#39;</span><span class="p">,</span> <span class="s">&#39;/i/j/123.txt&#39;</span><span class="p">,</span> <span class="s">&#39;/k/l/456.lab&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sublist1</span><span class="p">,</span> <span class="n">sublist2</span> <span class="o">=</span> <span class="n">mir_eval</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">intersect_files</span><span class="p">(</span><span class="n">flist1</span><span class="p">,</span> <span class="n">flist2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">sublist1</span>
<span class="go">[&#39;/e/f/xyz.lab&#39;, &#39;/c/d/123.lab&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">sublist2</span>
<span class="go">[&#39;/g/h/xyz.npy&#39;, &#39;/i/j/123.txt&#39;]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li>flist1 : list of filepaths</li>
<li>flist2 : list of filepaths</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li>sublist1 : list of filepaths</li>
<li>sublist2 : list of filepaths</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.util.merge_labeled_intervals">
<tt class="descclassname">mir_eval.util.</tt><tt class="descname">merge_labeled_intervals</tt><big>(</big><em>x_intervals</em>, <em>x_labels</em>, <em>y_intervals</em>, <em>y_labels</em><big>)</big><a class="headerlink" href="#mir_eval.util.merge_labeled_intervals" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge the time intervals of two sequences &#8216;x&#8217; and &#8216;y&#8217;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>x_intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.array</span></dt>
<dd><p class="first last">Array of interval times (seconds)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>x_labels <span class="classifier-delimiter">:</span> <span class="classifier">list or None</span></dt>
<dd><p class="first last">List of labels</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>y_intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.array</span></dt>
<dd><p class="first last">Array of interval times (seconds)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>y_labels <span class="classifier-delimiter">:</span> <span class="classifier">list or None</span></dt>
<dd><p class="first last">List of labels</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><ul>
<li><dl class="first docutils">
<dt>new_intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.array</span></dt>
<dd><p class="first last">New interval times of the merged sequences.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>new_x_labels <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">New labels for the sequence &#8216;x&#8217;</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>new_y_labels <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">New labels for the sequence &#8216;y&#8217;</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li>ValueError</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>..note:: The intervals of x and y must be aligned, or previously adjusted
via &#8216;adjust_intervals&#8217;.</p>
</dd></dl>

<dl class="function">
<dt id="mir_eval.util.match_events">
<tt class="descclassname">mir_eval.util.</tt><tt class="descname">match_events</tt><big>(</big><em>ref</em>, <em>est</em>, <em>window</em><big>)</big><a class="headerlink" href="#mir_eval.util.match_events" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a maximum matching between reference and estimated event times, subject to a window constraint.</p>
<p>Given two list of event times <cite>ref</cite> and <cite>est</cite>, we seek the largest set of correspondences <cite>(ref[i], est[j])</cite>
such that <cite>|ref[i] - est[j]| &lt;= window</cite>, and each <cite>ref[i]</cite> and <cite>est[j]</cite> is matched at most once.</p>
<p>This is useful for computing precision/recall metrics in beat tracking, onset detection, and segmentation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li>ref : np.ndarray, shape=(n,)
Array of reference event times</li>
<li>est : np.ndarray, shape=(m,)
Array of estimated event times</li>
<li>window : float &gt; 0
Size of the window.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li>matching : list of tuples
A list of matched reference and event numbers.
<cite>matching[i] == (i, j)</cite> where <cite>ref[i]</cite> matches <cite>est[j]</cite>.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.util.validate_intervals">
<tt class="descclassname">mir_eval.util.</tt><tt class="descname">validate_intervals</tt><big>(</big><em>intervals</em><big>)</big><a class="headerlink" href="#mir_eval.util.validate_intervals" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that an (n, 2) interval ndarray is well-formed, and raises errors if not.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last">
<li><dl class="first docutils">
<dt>intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n, 2)</span></dt>
<dd><p class="first last">Array of interval start/end locations.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.util.validate_events">
<tt class="descclassname">mir_eval.util.</tt><tt class="descname">validate_events</tt><big>(</big><em>events</em>, <em>max_time=30000.0</em><big>)</big><a class="headerlink" href="#mir_eval.util.validate_events" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks that a 1-d event location ndarray is well-formed, and raises errors if not.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last">
<li><dl class="first docutils">
<dt>events <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n,)</span></dt>
<dd><p class="first last">Array of event times</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>max_time <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">If an event is found above this time, the user will be warned.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="mir_eval.util.filter_labeled_intervals">
<tt class="descclassname">mir_eval.util.</tt><tt class="descname">filter_labeled_intervals</tt><big>(</big><em>intervals</em>, <em>labels</em><big>)</big><a class="headerlink" href="#mir_eval.util.filter_labeled_intervals" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove all invalid intervals (start &gt;= end) and corresponding labels.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.array</span></dt>
<dd><p class="first last">Array of interval times (seconds)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>labels <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">List of labels</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>filtered_intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.array</span></dt>
<dd><p class="first last">Valid interval times.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>filtered_labels <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd><p class="first last">Corresponding filtered labels</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference internal" href="py-modindex.html"><em>Module Index</em></a></li>
<li><a class="reference internal" href="search.html"><em>Search Page</em></a></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">mir_eval documentation</a></li>
<li><a class="reference internal" href="#mir-eval">mir_eval</a><ul>
<li><a class="reference internal" href="#module-mir_eval.beat">mir_eval.beat</a></li>
<li><a class="reference internal" href="#module-mir_eval.boundary">mir_eval.boundary</a></li>
<li><a class="reference internal" href="#module-mir_eval.chord">mir_eval.chord</a><ul>
<li><a class="reference internal" href="#conventions">Conventions:</a></li>
<li><a class="reference internal" href="#defintions">Defintions:</a></li>
<li><a class="reference internal" href="#a-note-on-comparison-functions">A Note on Comparison Functions:</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-mir_eval.mm_chord">mir_eval.mm_chord</a></li>
<li><a class="reference internal" href="#module-mir_eval.input_output">mir_eval.input_output</a></li>
<li><a class="reference internal" href="#module-mir_eval.melody">mir_eval.melody</a></li>
<li><a class="reference internal" href="#module-mir_eval.onset">mir_eval.onset</a></li>
<li><a class="reference internal" href="#module-mir_eval.pattern">mir_eval.pattern</a><ul>
<li><a class="reference internal" href="#input-format">Input Format</a></li>
<li><a class="reference internal" href="#metrics-implemented">Metrics implemented</a><ul>
<li><a class="reference internal" href="#standard-precision-recall-and-f1-score">Standard Precision, Recall and F1 Score</a></li>
<li><a class="reference internal" href="#establishment-precision-recall-and-f1-score">Establishment Precision, Recall and F1 Score</a></li>
<li><a class="reference internal" href="#occurrence-precision-recall-and-f1-score">Occurrence Precision, Recall and F1 Score</a></li>
<li><a class="reference internal" href="#three-layer-precision-recall-and-f1-score">Three-layer Precision, Recall and F1 Score</a></li>
<li><a class="reference internal" href="#first-n-patterns-metrics">First N patterns metrics</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-mir_eval.separation">mir_eval.separation</a></li>
<li><a class="reference internal" href="#module-mir_eval.sonify">mir_eval.sonify</a></li>
<li><a class="reference internal" href="#module-mir_eval.structure">mir_eval.structure</a></li>
<li><a class="reference internal" href="#module-mir_eval.util">mir_eval.util</a></li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="#">mir_eval 0.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Colin Raffel et al..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>